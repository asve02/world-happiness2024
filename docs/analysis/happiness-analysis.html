<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ashish Verma">

<title>World Happiness Analysis-Kaggle dataset – World Happiness with tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="../site_libs/plotly-binding-4.11.0/plotly.js"></script>

<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="../site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

<script src="../site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>

<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">World Happiness with tidyverse</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../analysis/happiness-analysis.html" aria-current="page"> 
<span class="menu-text">Happiness analysis</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">World Happiness Analysis-Kaggle dataset</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ashish Verma </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#List of required packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"readxl"</span>, <span class="st">"janitor"</span>, <span class="st">"broom"</span>, <span class="st">"plotly"</span>, <span class="st">"countrycode"</span>, <span class="st">"tidyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Install missing packages</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (pkg <span class="cf">in</span> packages) {</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(pkg)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Load all packages</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[2]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[3]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[4]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[5]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[6]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       

[[7]]
 [1] "countrycode" "plotly"      "broom"       "janitor"     "readxl"     
 [6] "lubridate"   "forcats"     "stringr"     "dplyr"       "purrr"      
[11] "readr"       "tidyr"       "tibble"      "ggplot2"     "tidyverse"  
[16] "stats"       "graphics"    "grDevices"   "utils"       "datasets"   
[21] "methods"     "base"       </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q1:Read happiness dataset (use "Alt + -" for &lt;-)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>happiness <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../data/happiness.xlsx"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Quick look at the data</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(happiness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,363
Columns: 11
$ `Country name`                     &lt;chr&gt; "Afghanistan", "Afghanistan", "Afgh…
$ year                               &lt;dbl&gt; 2008, 2009, 2010, 2011, 2012, 2013,…
$ `Life Ladder`                      &lt;dbl&gt; 3.724, 4.402, 4.758, 3.832, 3.783, …
$ `Log GDP per capita`               &lt;dbl&gt; 7.350, 7.509, 7.614, 7.581, 7.661, …
$ `Social support`                   &lt;dbl&gt; 0.451, 0.552, 0.539, 0.521, 0.521, …
$ `Healthy life expectancy at birth` &lt;dbl&gt; 50.500, 50.800, 51.100, 51.400, 51.…
$ `Freedom to make life choices`     &lt;dbl&gt; 0.718, 0.679, 0.600, 0.496, 0.531, …
$ Generosity                         &lt;dbl&gt; 0.164, 0.187, 0.118, 0.160, 0.234, …
$ `Perceptions of corruption`        &lt;dbl&gt; 0.882, 0.850, 0.707, 0.731, 0.776, …
$ `Positive affect`                  &lt;dbl&gt; 0.414, 0.481, 0.517, 0.480, 0.614, …
$ `Negative affect`                  &lt;dbl&gt; 0.258, 0.237, 0.275, 0.267, 0.268, …</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Country name"                     "year"                            
 [3] "Life Ladder"                      "Log GDP per capita"              
 [5] "Social support"                   "Healthy life expectancy at birth"
 [7] "Freedom to make life choices"     "Generosity"                      
 [9] "Perceptions of corruption"        "Positive affect"                 
[11] "Negative affect"                 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#we see that each column names appear with space between them, lets put "_" in place of space </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>happiness <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../data/happiness.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="co"># converts all column names into tidy, R-friendly names</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#check if the column names got cleaned (check structure using glimpse)</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(happiness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,363
Columns: 11
$ country_name                     &lt;chr&gt; "Afghanistan", "Afghanistan", "Afghan…
$ year                             &lt;dbl&gt; 2008, 2009, 2010, 2011, 2012, 2013, 2…
$ life_ladder                      &lt;dbl&gt; 3.724, 4.402, 4.758, 3.832, 3.783, 3.…
$ log_gdp_per_capita               &lt;dbl&gt; 7.350, 7.509, 7.614, 7.581, 7.661, 7.…
$ social_support                   &lt;dbl&gt; 0.451, 0.552, 0.539, 0.521, 0.521, 0.…
$ healthy_life_expectancy_at_birth &lt;dbl&gt; 50.500, 50.800, 51.100, 51.400, 51.70…
$ freedom_to_make_life_choices     &lt;dbl&gt; 0.718, 0.679, 0.600, 0.496, 0.531, 0.…
$ generosity                       &lt;dbl&gt; 0.164, 0.187, 0.118, 0.160, 0.234, 0.…
$ perceptions_of_corruption        &lt;dbl&gt; 0.882, 0.850, 0.707, 0.731, 0.776, 0.…
$ positive_affect                  &lt;dbl&gt; 0.414, 0.481, 0.517, 0.480, 0.614, 0.…
$ negative_affect                  &lt;dbl&gt; 0.258, 0.237, 0.275, 0.267, 0.268, 0.…</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "country_name"                     "year"                            
 [3] "life_ladder"                      "log_gdp_per_capita"              
 [5] "social_support"                   "healthy_life_expectancy_at_birth"
 [7] "freedom_to_make_life_choices"     "generosity"                      
 [9] "perceptions_of_corruption"        "positive_affect"                 
[11] "negative_affect"                 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2: Which countries and years included in the dataset?</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2.1: Unique list of countries</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(country_name) <span class="sc">|&gt;</span> <span class="co">#distinct() finds unique values</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(country_name) <span class="co">#arrange() sorts alphabetically</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 165 × 1
   country_name
   &lt;chr&gt;       
 1 Afghanistan 
 2 Albania     
 3 Algeria     
 4 Angola      
 5 Argentina   
 6 Armenia     
 7 Australia   
 8 Austria     
 9 Azerbaijan  
10 Bahrain     
# ℹ 155 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2.2: Unique list of years</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(year) <span class="sc">|&gt;</span> <span class="co">#distinct() finds unique values</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 1
    year
   &lt;dbl&gt;
 1  2005
 2  2006
 3  2007
 4  2008
 5  2009
 6  2010
 7  2011
 8  2012
 9  2013
10  2014
11  2015
12  2016
13  2017
14  2018
15  2019
16  2020
17  2021
18  2022
19  2023</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q3: How many years of data does each country have?</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(country_name, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="co">#sort used to sort result in descending order</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 165 × 2
   country_name     n
   &lt;chr&gt;        &lt;int&gt;
 1 Argentina       18
 2 Bangladesh      18
 3 Bolivia         18
 4 Brazil          18
 5 Cambodia        18
 6 Cameroon        18
 7 Canada          18
 8 Chile           18
 9 Colombia        18
10 Costa Rica      18
# ℹ 155 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q4: What is the average Life Ladder (happiness score) for each year?</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_countries =</span> <span class="fu">n</span>()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 3
    year mean_happiness n_countries
   &lt;dbl&gt;          &lt;dbl&gt;       &lt;int&gt;
 1  2005           6.45          27
 2  2006           5.20          89
 3  2007           5.42         102
 4  2008           5.42         110
 5  2009           5.46         114
 6  2010           5.50         124
 7  2011           5.42         146
 8  2012           5.44         141
 9  2013           5.39         136
10  2014           5.39         144
11  2015           5.40         142
12  2016           5.40         141
13  2017           5.46         147
14  2018           5.50         141
15  2019           5.57         143
16  2020           5.73         116
17  2021           5.64         122
18  2022           5.50         140
19  2023           5.62         138</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#summarise(): calculates summary values inside each group</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#na.rm = TRUE: </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q5: Classify life Ladder scores into High, Medium, and Low groups based on quartiles and add this as a new column</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1 — Create ladder_group using ntile()</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>happiness_grouped <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ladder_group =</span> <span class="fu">case_when</span>( <span class="co"># case_when() lets us assign a category based on conditions</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"High"</span>, <span class="co"># divides the numeric variable into 4 equal sized groups (quartiles)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">~</span> <span class="st">"Medium"</span>, <span class="co"># Q1: bottom 25%; Q2-3: Middle 50%; Q4: Top 25%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Low"</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#After case_when(), the column is a character vector: e.g., "High"</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#also, Character vectors are alphabetically ordered when plotted or summarized: High, Low, Medium- this is not the logical order of happiness</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Optional ordered factor </span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>happiness_grouped <span class="ot">&lt;-</span> happiness_grouped <span class="sc">|&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">ladder_group =</span> <span class="fu">factor</span>(ladder_group, <span class="co">#A factor is a categorical variable with controlled order</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span>))</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>happiness_grouped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,363 × 12
   country_name  year life_ladder log_gdp_per_capita social_support
   &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;              &lt;dbl&gt;          &lt;dbl&gt;
 1 Afghanistan   2008        3.72               7.35          0.451
 2 Afghanistan   2009        4.40               7.51          0.552
 3 Afghanistan   2010        4.76               7.61          0.539
 4 Afghanistan   2011        3.83               7.58          0.521
 5 Afghanistan   2012        3.78               7.66          0.521
 6 Afghanistan   2013        3.57               7.68          0.484
 7 Afghanistan   2014        3.13               7.67          0.526
 8 Afghanistan   2015        3.98               7.65          0.529
 9 Afghanistan   2016        4.22               7.65          0.559
10 Afghanistan   2017        2.66               7.65          0.491
# ℹ 2,353 more rows
# ℹ 7 more variables: healthy_life_expectancy_at_birth &lt;dbl&gt;,
#   freedom_to_make_life_choices &lt;dbl&gt;, generosity &lt;dbl&gt;,
#   perceptions_of_corruption &lt;dbl&gt;, positive_affect &lt;dbl&gt;,
#   negative_affect &lt;dbl&gt;, ladder_group &lt;fct&gt;</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q5: List all countries where Happiness Score is above the global mean</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Step1: Calculate global mean happiness score</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>global_mean_happiness <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">global_mean =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="co"># returns a tibble with one row and one column, not a numeric value</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(global_mean) <span class="co"># extracts the value and turn into a pure numeric vector</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>global_mean_happiness</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.483566</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Step2: filter countries avove this mean</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>above_mean <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(life_ladder <span class="sc">&gt;</span> global_mean_happiness) <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(life_ladder))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>above_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,153 × 11
   country_name  year life_ladder log_gdp_per_capita social_support
   &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;              &lt;dbl&gt;          &lt;dbl&gt;
 1 Denmark       2005        8.02               10.8          0.972
 2 Denmark       2008        7.97               10.9          0.954
 3 Finland       2020        7.89               10.8          0.962
 4 Finland       2018        7.86               10.8          0.962
 5 Denmark       2007        7.83               10.9          0.954
 6 Finland       2021        7.79               10.8          0.97 
 7 Denmark       2011        7.79               10.8          0.962
 8 Finland       2017        7.79               10.8          0.964
 9 Finland       2019        7.78               10.8          0.937
10 Switzerland   2012        7.78               11.1          0.947
# ℹ 1,143 more rows
# ℹ 6 more variables: healthy_life_expectancy_at_birth &lt;dbl&gt;,
#   freedom_to_make_life_choices &lt;dbl&gt;, generosity &lt;dbl&gt;,
#   perceptions_of_corruption &lt;dbl&gt;, positive_affect &lt;dbl&gt;,
#   negative_affect &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "country_name"                     "year"                            
 [3] "life_ladder"                      "log_gdp_per_capita"              
 [5] "social_support"                   "healthy_life_expectancy_at_birth"
 [7] "freedom_to_make_life_choices"     "generosity"                      
 [9] "perceptions_of_corruption"        "positive_affect"                 
[11] "negative_affect"                 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q6: Correlation of life_ladder with all variables</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#select numeric variable only</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute correlation of each numeric variable with life_ladder</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>life_cor <span class="ot">&lt;-</span> numeric_data <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">cor</span>(.x, life_ladder, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Pivot longer and remove the self-correlation (1.0)</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>life_cor_long <span class="ot">&lt;-</span> life_cor <span class="sc">|&gt;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"correlation"</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">"life_ladder"</span>)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co">#heatmap</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_cor_long, <span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"life_ladder"</span>, <span class="at">fill =</span> correlation)) <span class="sc">+</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(correlation, <span class="dv">2</span>)), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"red"</span>,</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"blue"</span>,</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>,</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation of Life Ladder with All Numeric Variables"</span>,</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variable"</span>,</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">35</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#heatmap does not look good, so a barplot plotted</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_cor_long, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(variable, correlation), <span class="at">y =</span> correlation)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(correlation, <span class="dv">2</span>)),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation of Life Ladder with All Numeric Variables"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variable"</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Correlation"</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q7: What is the global happiness trend over time? (Line plot)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#To answer that, for each year we need one number: the mean Life Ladder across all countries that have data in that year.</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate global mean happiness per year</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>happiness_yearly <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>happiness_yearly <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mean_happiness)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Global Happiness Trend Over Time"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Average Life Ladder (Happiness Score)"</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>)<span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8: Which countries are the happiest on average across all years?</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>country_means <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_years =</span> <span class="fu">n</span>()</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_happiness))</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#show top 10 happinest counntries</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(country_means, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   country_name mean_happiness n_years
   &lt;chr&gt;                 &lt;dbl&gt;   &lt;int&gt;
 1 Denmark                7.66      18
 2 Finland                7.62      16
 3 Iceland                7.47      11
 4 Norway                 7.46      13
 5 Netherlands            7.44      17
 6 Switzerland            7.44      13
 7 Sweden                 7.37      18
 8 Canada                 7.30      18
 9 New Zealand            7.26      17
10 Australia              7.24      17</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8.1: A bar plot of top 10 happiest countries?</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>top10_countries <span class="ot">&lt;-</span> country_means <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot bar chart of top 10 happiest countries</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>top10_countries <span class="sc">|&gt;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(country_name, mean_happiness), </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> mean_happiness)) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Top 10 Happiest Countries (Average Life Ladder)"</span>,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Country"</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Average Happiness Score"</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#aes(x = reorder(country_name, mean_happiness), y = mean_happiness)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder(x, y) tells R: “Sort x according to y.”</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#“Take country_name and reorder it based on the values of mean_happiness.”</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Because in a bar plot: The height of the bar is determined by y</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#The position/order of the bars is determined by x</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#So sorting must be applied to x, not y.</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_col(): draw bars where height = y value.This is used when you already have a summary value (like mean), not raw counts.</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">#coord_flip(): swaps x and y axes: countries go on the vertical axis</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">#bars extend horizontally. This is much easier to read when we have long country names.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8.2: A barplot of bottom 10 countries</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>bottom_10_countries <span class="ot">&lt;-</span> country_means <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#plot barchart of bottom 10 countries</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>bottom_10_countries <span class="sc">|&gt;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(country_name, mean_happiness),</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> mean_happiness))<span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Bottom 10 happiest countries (Average Life Ladder)"</span>,</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Country"</span>,</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Happiness Score"</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q9: How does GDP relate to happiness?</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#(Happiness = Life Ladder, GDP = Log GDP per capita)</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1: Prepare data (remove missing values)</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(life_ladder, log_gdp_per_capita) </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co">#drop_na() ensures that only rows with complete values are kept</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 2: Scatter plot of GDP vs Happiness</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="sc">|&gt;</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_gdp_per_capita, <span class="at">y =</span> life_ladder)) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> <span class="co">#alpha = 0.4 makes points semi-transparent so dense areas become visible</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Relationship Between GDP and Happiness"</span>,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Log GDP per capita"</span>,</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Life Ladder (Happiness Score)"</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#method = "lm" fits a straight line (linear model)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#se = TRUE adds a shaded confidence interval → uncertainty around the line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Q9.1: lets try to mention the linear regression equation on the plot</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1: Clean data</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(life_ladder, log_gdp_per_capita)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 2: Fit linear model (Happiness = Intercept + Slope × LogGDP)</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#even if one is missing, that row can't be used</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_ladder <span class="sc">~</span>  log_gdp_per_capita, <span class="at">data =</span> gdp_data)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 3: Extract coefficients and R²</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>model_stats <span class="ot">&lt;-</span> <span class="fu">tidy</span>(model) <span class="co">#this returns a table of statistics of regression table (row1 = intercept (constant term); row2: slope (coefficient of log GDP))</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>model_glance <span class="ot">&lt;-</span> <span class="fu">glance</span>(model) <span class="co">#extract  R2</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co">#store these statistics value</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>intercept <span class="ot">&lt;-</span> <span class="fu">round</span>(model_stats<span class="sc">$</span>estimate[<span class="dv">1</span>], <span class="dv">2</span>) <span class="co">#till 2 decimenl places</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>slope <span class="ot">&lt;-</span> <span class="fu">round</span>(model_stats<span class="sc">$</span>estimate[<span class="dv">2</span>], <span class="dv">2</span>)</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">round</span>(model_glance<span class="sc">$</span>r.squared, <span class="dv">2</span>)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co">#build equation text</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>eq_text <span class="ot">&lt;-</span> <span class="fu">paste0</span>( </span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="st">"Happiness = "</span>, intercept, <span class="st">" + "</span>, slope, <span class="st">" × logGDP</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="st">"R² = "</span>, r2</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="co">#paste0(): It concatenates strings without spaces unless we add them manually.</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 4: Plot with regression line + equation</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="sc">|&gt;</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(log_gdp_per_capita, life_ladder)) <span class="sc">+</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="st">"text"</span>, <span class="co">#We want to draw text, not shapes or lines.</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="fu">max</span>(gdp_data<span class="sc">$</span>log_gdp_per_capita) <span class="sc">*</span> <span class="fl">0.6</span>, <span class="co">#Place the equation 60% across the x-axis (right side but not too far).</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="fu">max</span>(gdp_data<span class="sc">$</span>life_ladder) <span class="sc">*</span> <span class="fl">0.95</span>, <span class="co">#Place it 95% up the y-axis (near the top)</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="at">label =</span> eq_text, <span class="co">#This is the formatted equation + R²</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="at">hjust =</span> <span class="dv">0</span>, <span class="co">#Left-align the text (so it doesn’t look squeezed).</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a><span class="at">size =</span> <span class="dv">4</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"GDP vs Happiness with Regression Equation"</span>,</span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Log GDP per capita"</span>,</span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Life Ladder (Happiness Score)"</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="happiness-analysis_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Q10: Plot a worl map and show how happiness score changes over time -interactive plot</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Prepare data for mapping</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>happiness_map <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso3 =</span> <span class="fu">countrycode</span>(country_name, <span class="st">"country.name"</span>, <span class="st">"iso3c"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(iso3, life_ladder) <span class="co">#remove rows where iso3 code and life_ladder missing</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Build interactive world map with year slider</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> happiness_map <span class="sc">|&gt;</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_ly</span>(  <span class="co">#plotly interactive plot</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="sc">~</span>iso3, <span class="co">#Draw a country based on its ISO3 code</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">z =</span> <span class="sc">~</span>life_ladder, <span class="co">#This determines the color shading of each country.</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">frame =</span> <span class="sc">~</span>year, <span class="co">#created the year slider, one map per year</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"choropleth"</span>, <span class="co">#A choropleth map meanswhere each country is shaded based on the value of a variable</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="sc">~</span>life_ladder, <span class="co">#Use Life Ladder values to determine the map color.</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colorscale =</span> <span class="st">"Viridis"</span> <span class="co">#color-blind friendly</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colorbar</span>(<span class="at">title =</span> <span class="st">"Life Ladder"</span>) <span class="sc">|&gt;</span> <span class="co">#Adds a legend on the right showing the mapping between color and happiness score.</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>( <span class="co">#Controls the visual layout</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"World Happiness Over Time"</span>,</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">geo =</span> <span class="fu">list</span>(<span class="at">showframe =</span> <span class="cn">FALSE</span>, <span class="at">showcoastlines =</span> <span class="cn">FALSE</span>)) <span class="co">#no border frames and coastlines</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9d8f2433ce1ade3d61cd" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9d8f2433ce1ade3d61cd">{"x":{"visdat":{"b748124b44de":["function () ","plotlyVisDat"]},"cur_data":"b748124b44de","attrs":{"b748124b44de":{"locations":{},"z":{},"colorscale":"Viridis","color":{},"frame":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"choropleth"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"zaxis":{"title":"life_ladder"}},"hovermode":"closest","showlegend":false,"sliders":[{"currentvalue":{"prefix":"year: ","xanchor":"right","font":{"size":16,"color":"rgba(204,204,204,1)"}},"steps":[{"method":"animate","args":[["2005"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2005","value":"2005"},{"method":"animate","args":[["2006"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2006","value":"2006"},{"method":"animate","args":[["2007"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2007","value":"2007"},{"method":"animate","args":[["2008"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2008","value":"2008"},{"method":"animate","args":[["2009"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2009","value":"2009"},{"method":"animate","args":[["2010"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2010","value":"2010"},{"method":"animate","args":[["2011"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2011","value":"2011"},{"method":"animate","args":[["2012"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2012","value":"2012"},{"method":"animate","args":[["2013"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2013","value":"2013"},{"method":"animate","args":[["2014"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2014","value":"2014"},{"method":"animate","args":[["2015"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2015","value":"2015"},{"method":"animate","args":[["2016"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2016","value":"2016"},{"method":"animate","args":[["2017"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2017","value":"2017"},{"method":"animate","args":[["2018"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2018","value":"2018"},{"method":"animate","args":[["2019"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2019","value":"2019"},{"method":"animate","args":[["2020"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2020","value":"2020"},{"method":"animate","args":[["2021"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2021","value":"2021"},{"method":"animate","args":[["2022"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2022","value":"2022"},{"method":"animate","args":[["2023"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true},"mode":"immediate"}],"label":"2023","value":"2023"}],"visible":true,"pad":{"t":40}}],"updatemenus":[{"type":"buttons","direction":"right","showactive":false,"y":0,"x":0,"yanchor":"top","xanchor":"right","pad":{"t":60,"r":5},"buttons":[{"label":"Play","method":"animate","args":[null,{"fromcurrent":true,"mode":"immediate","transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":true}}]}]}],"legend":{"yanchor":"top","y":0.5},"title":"World Happiness Over Time","geo":{"showframe":false,"showcoastlines":false}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"Life Ladder","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":"Viridis","showscale":true,"locations":["AUS","BEL","BRA","CAN","CZE","DNK","EGY","FRA","DEU","GRC","HUN","IRN","ITA","JPN","JOR","LBN","MEX","NLD","PAK","POL","ROU","SAU","ESP","SWE","TUR","GBR","VEN"],"z":[7.3410000000000002,7.2619999999999996,6.6369999999999996,7.4180000000000001,6.4390000000000001,8.0190000000000001,5.1680000000000001,7.093,6.6200000000000001,6.0060000000000002,5.194,5.3079999999999998,6.8540000000000001,6.516,6.2949999999999999,5.4909999999999997,6.5810000000000004,7.4640000000000004,5.2249999999999996,5.5869999999999997,5.0490000000000004,7.0800000000000001,7.1529999999999996,7.3760000000000003,4.7190000000000003,6.984,7.1699999999999999],"frame":"2005","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[7.3410000000000002,7.2619999999999996,6.6369999999999996,7.4180000000000001,6.4390000000000001,8.0190000000000001,5.1680000000000001,7.093,6.6200000000000001,6.0060000000000002,5.194,5.3079999999999998,6.8540000000000001,6.516,6.2949999999999999,5.4909999999999997,6.5810000000000004,7.4640000000000004,5.2249999999999996,5.5869999999999997,5.0490000000000004,7.0800000000000001,7.1529999999999996,7.3760000000000003,4.7190000000000003,6.984,7.1699999999999999]}},"visible":true}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"frames":[{"name":"2005","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AUS","BEL","BRA","CAN","CZE","DNK","EGY","FRA","DEU","GRC","HUN","IRN","ITA","JPN","JOR","LBN","MEX","NLD","PAK","POL","ROU","SAU","ESP","SWE","TUR","GBR","VEN"],"z":[7.3410000000000002,7.2619999999999996,6.6369999999999996,7.4180000000000001,6.4390000000000001,8.0190000000000001,5.1680000000000001,7.093,6.6200000000000001,6.0060000000000002,5.194,5.3079999999999998,6.8540000000000001,6.516,6.2949999999999999,5.4909999999999997,6.5810000000000004,7.4640000000000004,5.2249999999999996,5.5869999999999997,5.0490000000000004,7.0800000000000001,7.1529999999999996,7.3760000000000003,4.7190000000000003,6.984,7.1699999999999999],"frame":"2005","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[7.3410000000000002,7.2619999999999996,6.6369999999999996,7.4180000000000001,6.4390000000000001,8.0190000000000001,5.1680000000000001,7.093,6.6200000000000001,6.0060000000000002,5.194,5.3079999999999998,6.8540000000000001,6.516,6.2949999999999999,5.4909999999999997,6.5810000000000004,7.4640000000000004,5.2249999999999996,5.5869999999999997,5.0490000000000004,7.0800000000000001,7.1529999999999996,7.3760000000000003,4.7190000000000003,6.984,7.1699999999999999]}},"visible":true}],"traces":[0]},{"name":"2006","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["ARG","ARM","AUT","AZE","BGD","BLR","BEN","BOL","BWA","BFA","KHM","CMR","TCD","CHL","CHN","COL","CRI","CUB","CYP","DOM","ECU","SLV","EST","FIN","FRA","GEO","GHA","GTM","HTI","HND","HKG","IND","IDN","IRL","ISR","JAM","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LTU","MDG","MWI","MYS","MLI","MDA","MOZ","NPL","NZL","NIC","NER","NGA","NOR","PAN","PRY","PER","PHL","PRT","RUS","RWA","SEN","SLE","SGP","SVK","SVN","ZAF","KOR","LKA","PSE","CHE","TWN","TJK","TZA","THA","TGO","TTO","UGA","UKR","ARE","USA","URY","UZB","VEN","VNM","ZMB","ZWE"],"z":[6.3129999999999997,4.2889999999999997,7.1219999999999999,4.7279999999999998,4.319,5.6580000000000004,3.3300000000000001,5.3739999999999997,4.7389999999999999,3.8010000000000002,3.569,3.851,3.4350000000000001,6.0629999999999997,4.5599999999999996,6.0250000000000004,7.0819999999999999,5.4180000000000001,6.2380000000000004,5.0880000000000001,5.024,5.7009999999999996,5.3710000000000004,7.6719999999999997,6.5830000000000002,3.6749999999999998,4.5350000000000001,5.9009999999999998,3.754,5.3970000000000002,5.5110000000000001,5.3479999999999999,4.9470000000000001,7.1440000000000001,7.173,6.2080000000000002,5.476,4.2229999999999999,6.0759999999999996,4.641,5.0759999999999996,4.71,4.6529999999999996,5.9539999999999997,3.98,3.8300000000000001,6.0119999999999996,4.0140000000000002,5.1020000000000003,4.5949999999999998,4.5670000000000002,7.3049999999999997,4.46,3.7370000000000001,4.71,7.4160000000000004,6.1280000000000001,4.7300000000000004,4.8109999999999999,4.6699999999999999,5.4050000000000002,4.9640000000000004,4.2149999999999999,4.4169999999999998,3.6280000000000001,6.4630000000000001,5.2649999999999997,5.8109999999999999,5.0839999999999996,5.3319999999999999,4.3449999999999998,4.7160000000000002,7.4729999999999999,6.1890000000000001,4.6130000000000004,3.9220000000000002,5.8849999999999998,3.202,5.8319999999999999,3.734,4.8040000000000003,6.734,7.1820000000000004,5.7859999999999996,5.2320000000000002,6.5250000000000004,5.2939999999999996,4.8239999999999998,3.8260000000000001],"frame":"2006","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[6.3129999999999997,4.2889999999999997,7.1219999999999999,4.7279999999999998,4.319,5.6580000000000004,3.3300000000000001,5.3739999999999997,4.7389999999999999,3.8010000000000002,3.569,3.851,3.4350000000000001,6.0629999999999997,4.5599999999999996,6.0250000000000004,7.0819999999999999,5.4180000000000001,6.2380000000000004,5.0880000000000001,5.024,5.7009999999999996,5.3710000000000004,7.6719999999999997,6.5830000000000002,3.6749999999999998,4.5350000000000001,5.9009999999999998,3.754,5.3970000000000002,5.5110000000000001,5.3479999999999999,4.9470000000000001,7.1440000000000001,7.173,6.2080000000000002,5.476,4.2229999999999999,6.0759999999999996,4.641,5.0759999999999996,4.71,4.6529999999999996,5.9539999999999997,3.98,3.8300000000000001,6.0119999999999996,4.0140000000000002,5.1020000000000003,4.5949999999999998,4.5670000000000002,7.3049999999999997,4.46,3.7370000000000001,4.71,7.4160000000000004,6.1280000000000001,4.7300000000000004,4.8109999999999999,4.6699999999999999,5.4050000000000002,4.9640000000000004,4.2149999999999999,4.4169999999999998,3.6280000000000001,6.4630000000000001,5.2649999999999997,5.8109999999999999,5.0839999999999996,5.3319999999999999,4.3449999999999998,4.7160000000000002,7.4729999999999999,6.1890000000000001,4.6130000000000004,3.9220000000000002,5.8849999999999998,3.202,5.8319999999999999,3.734,4.8040000000000003,6.734,7.1820000000000004,5.7859999999999996,5.2320000000000002,6.5250000000000004,5.2939999999999996,4.8239999999999998,3.8260000000000001]}},"visible":true}],"traces":[0]},{"name":"2007","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["ALB","ARG","ARM","AUS","AZE","BGD","BLR","BEL","BLZ","BOL","BIH","BRA","BGR","BFA","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","CRI","HRV","CZE","DNK","DOM","ECU","EGY","SLV","EST","GEO","DEU","GHA","GRC","GTM","GUY","HND","HUN","IND","IDN","IRN","ISR","ITA","JPN","JOR","KAZ","KEN","KGZ","LAO","LVA","LBR","LTU","MWI","MYS","MRT","MEX","MDA","MNG","MNE","MOZ","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","PAK","PAN","PRY","PER","PHL","POL","ROU","RUS","SAU","SEN","SRB","SLE","SGP","ZAF","KOR","ESP","LKA","PSE","SWE","TJK","TZA","THA","TUR","UGA","UKR","GBR","USA","URY","VNM","YEM","ZMB","ZWE"],"z":[4.6340000000000003,6.0730000000000004,4.8819999999999997,7.2850000000000001,4.5679999999999996,4.6070000000000002,5.617,7.2190000000000003,6.4509999999999996,5.6280000000000001,4.9000000000000004,6.3209999999999997,3.8439999999999999,4.0170000000000003,4.1559999999999997,4.3499999999999996,7.4820000000000002,4.1600000000000001,4.141,5.6980000000000004,4.8630000000000004,6.1379999999999999,7.4320000000000004,5.8209999999999997,6.5,7.8339999999999996,5.0810000000000004,4.9960000000000004,5.5410000000000004,5.2960000000000003,5.3319999999999999,3.7069999999999999,6.4169999999999998,5.2199999999999998,6.6470000000000002,6.3300000000000001,5.9930000000000003,5.0970000000000004,4.9539999999999997,5.0270000000000001,5.101,5.3360000000000003,6.8410000000000002,6.5739999999999998,6.2380000000000004,5.5979999999999999,5.7190000000000003,4.5759999999999996,4.6980000000000004,5.3639999999999999,4.6669999999999998,3.7010000000000001,5.8079999999999998,4.891,6.2389999999999999,4.149,6.5250000000000004,4.7750000000000004,4.609,5.1959999999999997,4.8330000000000002,4.8860000000000001,4.7480000000000002,7.452,7.6040000000000001,4.944,4.2770000000000001,4.8899999999999997,4.4939999999999998,5.6710000000000003,6.8940000000000001,5.2720000000000002,5.2140000000000004,5.0739999999999998,5.8860000000000001,5.3940000000000001,5.2229999999999999,7.2670000000000003,4.6799999999999997,4.75,3.585,6.8339999999999996,5.2039999999999997,5.7670000000000003,6.9950000000000001,4.415,4.1509999999999998,7.2409999999999997,4.4320000000000004,4.3179999999999996,5.7839999999999998,5.6230000000000002,4.4560000000000004,5.2519999999999998,6.8019999999999996,7.5129999999999999,5.694,5.4219999999999997,4.4770000000000003,3.9980000000000002,3.2799999999999998],"frame":"2007","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.6340000000000003,6.0730000000000004,4.8819999999999997,7.2850000000000001,4.5679999999999996,4.6070000000000002,5.617,7.2190000000000003,6.4509999999999996,5.6280000000000001,4.9000000000000004,6.3209999999999997,3.8439999999999999,4.0170000000000003,4.1559999999999997,4.3499999999999996,7.4820000000000002,4.1600000000000001,4.141,5.6980000000000004,4.8630000000000004,6.1379999999999999,7.4320000000000004,5.8209999999999997,6.5,7.8339999999999996,5.0810000000000004,4.9960000000000004,5.5410000000000004,5.2960000000000003,5.3319999999999999,3.7069999999999999,6.4169999999999998,5.2199999999999998,6.6470000000000002,6.3300000000000001,5.9930000000000003,5.0970000000000004,4.9539999999999997,5.0270000000000001,5.101,5.3360000000000003,6.8410000000000002,6.5739999999999998,6.2380000000000004,5.5979999999999999,5.7190000000000003,4.5759999999999996,4.6980000000000004,5.3639999999999999,4.6669999999999998,3.7010000000000001,5.8079999999999998,4.891,6.2389999999999999,4.149,6.5250000000000004,4.7750000000000004,4.609,5.1959999999999997,4.8330000000000002,4.8860000000000001,4.7480000000000002,7.452,7.6040000000000001,4.944,4.2770000000000001,4.8899999999999997,4.4939999999999998,5.6710000000000003,6.8940000000000001,5.2720000000000002,5.2140000000000004,5.0739999999999998,5.8860000000000001,5.3940000000000001,5.2229999999999999,7.2670000000000003,4.6799999999999997,4.75,3.585,6.8339999999999996,5.2039999999999997,5.7670000000000003,6.9950000000000001,4.415,4.1509999999999998,7.2409999999999997,4.4320000000000004,4.3179999999999996,5.7839999999999998,5.6230000000000002,4.4560000000000004,5.2519999999999998,6.8019999999999996,7.5129999999999999,5.694,5.4219999999999997,4.4770000000000003,3.9980000000000002,3.2799999999999998]}},"visible":true}],"traces":[0]},{"name":"2008","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ARG","ARM","AUS","AUT","AZE","BGD","BLR","BEL","BEN","BOL","BWA","BRA","BFA","BDI","KHM","CMR","CAN","TCD","CHL","CHN","COL","COG","CRI","DNK","DJI","DOM","ECU","EGY","SLV","EST","FIN","FRA","GEO","DEU","GHA","GTM","HTI","HND","HKG","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JPN","JOR","KAZ","KEN","KGZ","LAO","LVA","LBN","LBR","LTU","MDG","MYS","MLI","MRT","MEX","MDA","MNG","MOZ","NPL","NLD","NZL","NIC","NER","NGA","NOR","PAK","PAN","PRY","PER","PHL","PRT","RUS","RWA","SAU","SEN","SLE","SGP","ZAF","KOR","ESP","LKA","PSE","SWE","SYR","TWN","TJK","TZA","THA","TGO","TTO","TUR","UGA","UKR","GBR","USA","URY","UZB","VEN","VNM","ZMB","ZWE"],"z":[3.7240000000000002,5.9610000000000003,4.6520000000000001,7.2539999999999996,7.181,4.8170000000000002,5.0519999999999996,5.4630000000000001,7.117,3.6669999999999998,5.298,5.4509999999999996,6.6909999999999998,3.8460000000000001,3.5630000000000002,4.4619999999999997,4.2919999999999998,7.4859999999999998,4.6319999999999997,5.7889999999999997,4.8460000000000001,6.1680000000000001,3.8199999999999998,6.851,7.9710000000000001,5.0090000000000003,4.8419999999999996,5.2969999999999997,4.6319999999999997,5.1909999999999998,5.452,7.6710000000000003,7.008,4.1559999999999997,6.5220000000000002,4.9649999999999999,6.4139999999999997,3.8460000000000001,5.4199999999999999,5.1369999999999996,6.8879999999999999,5.1459999999999999,4.8150000000000004,5.1289999999999996,4.5899999999999999,7.5679999999999996,7.2610000000000001,6.7800000000000002,5.9109999999999996,4.9299999999999997,5.8860000000000001,4.0149999999999997,4.7370000000000001,5.0439999999999996,5.1449999999999996,4.5949999999999998,4.2210000000000001,5.5540000000000003,4.6399999999999997,5.8070000000000004,4.1150000000000002,4.2480000000000002,6.8289999999999997,5.5030000000000001,4.4930000000000003,4.6539999999999999,4.4409999999999998,7.6310000000000002,7.3810000000000002,5.1040000000000001,4.2359999999999998,4.9390000000000001,7.6319999999999997,4.4139999999999997,6.931,5.5700000000000003,5.1289999999999996,4.5890000000000004,5.7169999999999996,5.6189999999999998,4.3630000000000004,6.8109999999999999,4.6829999999999998,2.9969999999999999,6.6420000000000003,5.3460000000000001,5.3899999999999997,7.2939999999999996,4.431,4.3860000000000001,7.516,5.3230000000000004,5.548,5.0640000000000001,4.3849999999999998,5.6360000000000001,2.8079999999999998,6.6959999999999997,5.1180000000000003,4.569,5.1719999999999997,6.9859999999999998,7.2800000000000002,5.6639999999999997,5.3109999999999999,6.258,5.4800000000000004,4.7300000000000004,3.1739999999999999],"frame":"2008","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.7240000000000002,5.9610000000000003,4.6520000000000001,7.2539999999999996,7.181,4.8170000000000002,5.0519999999999996,5.4630000000000001,7.117,3.6669999999999998,5.298,5.4509999999999996,6.6909999999999998,3.8460000000000001,3.5630000000000002,4.4619999999999997,4.2919999999999998,7.4859999999999998,4.6319999999999997,5.7889999999999997,4.8460000000000001,6.1680000000000001,3.8199999999999998,6.851,7.9710000000000001,5.0090000000000003,4.8419999999999996,5.2969999999999997,4.6319999999999997,5.1909999999999998,5.452,7.6710000000000003,7.008,4.1559999999999997,6.5220000000000002,4.9649999999999999,6.4139999999999997,3.8460000000000001,5.4199999999999999,5.1369999999999996,6.8879999999999999,5.1459999999999999,4.8150000000000004,5.1289999999999996,4.5899999999999999,7.5679999999999996,7.2610000000000001,6.7800000000000002,5.9109999999999996,4.9299999999999997,5.8860000000000001,4.0149999999999997,4.7370000000000001,5.0439999999999996,5.1449999999999996,4.5949999999999998,4.2210000000000001,5.5540000000000003,4.6399999999999997,5.8070000000000004,4.1150000000000002,4.2480000000000002,6.8289999999999997,5.5030000000000001,4.4930000000000003,4.6539999999999999,4.4409999999999998,7.6310000000000002,7.3810000000000002,5.1040000000000001,4.2359999999999998,4.9390000000000001,7.6319999999999997,4.4139999999999997,6.931,5.5700000000000003,5.1289999999999996,4.5890000000000004,5.7169999999999996,5.6189999999999998,4.3630000000000004,6.8109999999999999,4.6829999999999998,2.9969999999999999,6.6420000000000003,5.3460000000000001,5.3899999999999997,7.2939999999999996,4.431,4.3860000000000001,7.516,5.3230000000000004,5.548,5.0640000000000001,4.3849999999999998,5.6360000000000001,2.8079999999999998,6.6959999999999997,5.1180000000000003,4.569,5.1719999999999997,6.9859999999999998,7.2800000000000002,5.6639999999999997,5.3109999999999999,6.258,5.4800000000000004,4.7300000000000004,3.1739999999999999]}},"visible":true}],"traces":[0]},{"name":"2009","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","ARG","ARM","AZE","BHR","BGD","BLR","BOL","BIH","BRA","BDI","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","COD","CRI","HRV","CYP","DNK","DJI","DOM","ECU","EGY","SLV","EST","FRA","GEO","DEU","GHA","GRC","GTM","HND","HKG","HUN","IND","IDN","IRQ","IRL","ISR","ITA","CIV","JPN","JOR","KAZ","KEN","KWT","KGZ","LVA","LBN","LTU","LUX","MWI","MYS","MLI","MLT","MRT","MEX","MDA","MNE","NPL","NIC","NER","NGA","MKD","PAK","PAN","PRY","PER","PHL","POL","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SGP","SVN","ZAF","KOR","ESP","LKA","PSE","SDN","SWE","CHE","SYR","TJK","TZA","THA","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[4.4020000000000001,5.4850000000000003,6.4240000000000004,4.1779999999999999,4.5739999999999998,5.7009999999999996,5.0830000000000002,5.5640000000000001,6.0860000000000003,4.9630000000000001,7.0010000000000003,3.7919999999999998,4.1109999999999998,4.7409999999999997,7.4880000000000004,3.6389999999999998,6.4939999999999998,4.4539999999999997,6.2720000000000002,3.476,3.984,7.6150000000000002,5.4329999999999998,6.8330000000000002,7.6829999999999998,4.9059999999999997,5.4320000000000004,6.0220000000000002,5.0659999999999998,6.8390000000000004,5.1379999999999999,6.2830000000000004,3.8010000000000002,6.641,4.1980000000000004,6.0389999999999997,6.452,6.0330000000000004,5.3970000000000002,4.8949999999999996,4.5220000000000002,5.4720000000000004,4.7750000000000004,7.0460000000000003,7.3529999999999998,6.3339999999999996,4.1970000000000001,5.8449999999999998,6,5.383,4.2699999999999996,6.585,5.069,4.6689999999999996,5.2060000000000004,5.4669999999999996,6.9580000000000002,5.1479999999999997,5.3849999999999998,3.9769999999999999,6.3280000000000003,4.5,6.9630000000000001,5.5540000000000003,4.8010000000000002,4.9169999999999998,5.3529999999999998,4.2670000000000003,4.9800000000000004,4.4279999999999999,5.2080000000000002,7.0339999999999998,5.5759999999999996,5.5190000000000001,4.8799999999999999,5.7720000000000002,6.4180000000000001,5.3680000000000003,5.1580000000000004,4.0300000000000002,6.1479999999999997,4.335,4.3799999999999999,6.1449999999999996,5.8300000000000001,5.218,5.6479999999999997,6.1989999999999998,4.2119999999999997,4.4699999999999998,4.4550000000000001,7.266,7.5250000000000004,4.9790000000000001,4.5750000000000002,3.4079999999999999,5.476,5.0250000000000004,6.5679999999999996,5.2130000000000001,4.6120000000000001,5.1660000000000004,6.8659999999999997,6.907,7.1580000000000004,6.2960000000000003,5.2610000000000001,7.1890000000000001,5.3040000000000003,4.8090000000000002,5.2599999999999998,4.056],"frame":"2009","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.4020000000000001,5.4850000000000003,6.4240000000000004,4.1779999999999999,4.5739999999999998,5.7009999999999996,5.0830000000000002,5.5640000000000001,6.0860000000000003,4.9630000000000001,7.0010000000000003,3.7919999999999998,4.1109999999999998,4.7409999999999997,7.4880000000000004,3.6389999999999998,6.4939999999999998,4.4539999999999997,6.2720000000000002,3.476,3.984,7.6150000000000002,5.4329999999999998,6.8330000000000002,7.6829999999999998,4.9059999999999997,5.4320000000000004,6.0220000000000002,5.0659999999999998,6.8390000000000004,5.1379999999999999,6.2830000000000004,3.8010000000000002,6.641,4.1980000000000004,6.0389999999999997,6.452,6.0330000000000004,5.3970000000000002,4.8949999999999996,4.5220000000000002,5.4720000000000004,4.7750000000000004,7.0460000000000003,7.3529999999999998,6.3339999999999996,4.1970000000000001,5.8449999999999998,6,5.383,4.2699999999999996,6.585,5.069,4.6689999999999996,5.2060000000000004,5.4669999999999996,6.9580000000000002,5.1479999999999997,5.3849999999999998,3.9769999999999999,6.3280000000000003,4.5,6.9630000000000001,5.5540000000000003,4.8010000000000002,4.9169999999999998,5.3529999999999998,4.2670000000000003,4.9800000000000004,4.4279999999999999,5.2080000000000002,7.0339999999999998,5.5759999999999996,5.5190000000000001,4.8799999999999999,5.7720000000000002,6.4180000000000001,5.3680000000000003,5.1580000000000004,4.0300000000000002,6.1479999999999997,4.335,4.3799999999999999,6.1449999999999996,5.8300000000000001,5.218,5.6479999999999997,6.1989999999999998,4.2119999999999997,4.4699999999999998,4.4550000000000001,7.266,7.5250000000000004,4.9790000000000001,4.5750000000000002,3.4079999999999999,5.476,5.0250000000000004,6.5679999999999996,5.2130000000000001,4.6120000000000001,5.1660000000000004,6.8659999999999997,6.907,7.1580000000000004,6.2960000000000003,5.2610000000000001,7.1890000000000001,5.3040000000000003,4.8090000000000002,5.2599999999999998,4.056]}},"visible":true}],"traces":[0]},{"name":"2010","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COM","CRI","HRV","CYP","CZE","DNK","DJI","DOM","ECU","EGY","SLV","FIN","FRA","GEO","DEU","GHA","GRC","GTM","HTI","HND","HKG","HUN","IND","IDN","IRQ","IRL","ISR","ITA","JPN","JOR","KAZ","KEN","KWT","KGZ","LBN","LBR","LTU","LUX","MYS","MLI","MLT","MRT","MEX","MDA","MNG","MNE","MAR","NPL","NLD","NZL","NIC","NER","NGA","MKD","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SDN","SWE","SYR","TWN","TJK","TZA","THA","TUN","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZWE"],"z":[4.758,5.2690000000000001,5.4640000000000004,6.4409999999999998,4.3680000000000003,7.4500000000000002,7.3029999999999999,4.2190000000000003,5.9370000000000003,4.8579999999999997,5.5259999999999998,6.8540000000000001,5.7809999999999997,4.6689999999999996,3.5529999999999999,6.8369999999999997,3.9119999999999999,4.0359999999999996,4.141,4.5540000000000003,7.6500000000000004,3.5680000000000001,3.7429999999999999,6.6360000000000001,4.6529999999999996,6.4080000000000004,3.8119999999999998,7.2709999999999999,5.5960000000000001,6.3869999999999996,6.25,7.7709999999999999,5.0060000000000002,4.7350000000000003,5.8380000000000001,4.6689999999999996,6.7400000000000002,7.3929999999999998,6.798,4.1020000000000003,6.7249999999999996,4.6059999999999999,5.8399999999999999,6.29,3.766,5.8659999999999997,5.6429999999999998,4.7249999999999996,4.9889999999999999,5.4569999999999999,5.0650000000000004,7.2569999999999997,7.359,6.3540000000000001,6.0570000000000004,5.5700000000000003,5.5140000000000002,4.2560000000000002,6.798,4.9960000000000004,5.032,4.1959999999999997,5.0659999999999998,7.0970000000000004,5.5800000000000001,3.762,5.774,4.7720000000000002,6.8019999999999996,5.5899999999999999,4.5860000000000003,5.4550000000000001,4.383,4.3499999999999996,7.5019999999999998,7.2240000000000002,5.6870000000000003,4.101,4.7599999999999998,4.1799999999999997,5.7859999999999996,7.3209999999999997,5.8410000000000002,5.6130000000000004,4.9420000000000002,5.8869999999999996,5.0949999999999998,6.8499999999999996,4.9089999999999998,5.3849999999999998,6.3070000000000004,4.3719999999999999,4.4610000000000003,4.1340000000000003,6.5309999999999997,6.0519999999999996,6.0830000000000002,4.6520000000000001,6.1159999999999997,6.1879999999999997,3.9769999999999999,4.7030000000000003,4.4349999999999996,7.4960000000000004,4.4649999999999999,6.2290000000000001,4.3810000000000002,3.2290000000000001,6.2169999999999996,5.1310000000000002,5.4900000000000002,4.1929999999999996,5.0579999999999998,7.0970000000000004,7.0289999999999999,7.1639999999999997,6.0620000000000003,5.0949999999999998,7.4779999999999998,5.2960000000000003,4.3499999999999996,4.6820000000000004],"frame":"2010","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.758,5.2690000000000001,5.4640000000000004,6.4409999999999998,4.3680000000000003,7.4500000000000002,7.3029999999999999,4.2190000000000003,5.9370000000000003,4.8579999999999997,5.5259999999999998,6.8540000000000001,5.7809999999999997,4.6689999999999996,3.5529999999999999,6.8369999999999997,3.9119999999999999,4.0359999999999996,4.141,4.5540000000000003,7.6500000000000004,3.5680000000000001,3.7429999999999999,6.6360000000000001,4.6529999999999996,6.4080000000000004,3.8119999999999998,7.2709999999999999,5.5960000000000001,6.3869999999999996,6.25,7.7709999999999999,5.0060000000000002,4.7350000000000003,5.8380000000000001,4.6689999999999996,6.7400000000000002,7.3929999999999998,6.798,4.1020000000000003,6.7249999999999996,4.6059999999999999,5.8399999999999999,6.29,3.766,5.8659999999999997,5.6429999999999998,4.7249999999999996,4.9889999999999999,5.4569999999999999,5.0650000000000004,7.2569999999999997,7.359,6.3540000000000001,6.0570000000000004,5.5700000000000003,5.5140000000000002,4.2560000000000002,6.798,4.9960000000000004,5.032,4.1959999999999997,5.0659999999999998,7.0970000000000004,5.5800000000000001,3.762,5.774,4.7720000000000002,6.8019999999999996,5.5899999999999999,4.5860000000000003,5.4550000000000001,4.383,4.3499999999999996,7.5019999999999998,7.2240000000000002,5.6870000000000003,4.101,4.7599999999999998,4.1799999999999997,5.7859999999999996,7.3209999999999997,5.8410000000000002,5.6130000000000004,4.9420000000000002,5.8869999999999996,5.0949999999999998,6.8499999999999996,4.9089999999999998,5.3849999999999998,6.3070000000000004,4.3719999999999999,4.4610000000000003,4.1340000000000003,6.5309999999999997,6.0519999999999996,6.0830000000000002,4.6520000000000001,6.1159999999999997,6.1879999999999997,3.9769999999999999,4.7030000000000003,4.4349999999999996,7.4960000000000004,4.4649999999999999,6.2290000000000001,4.3810000000000002,3.2290000000000001,6.2169999999999996,5.1310000000000002,5.4900000000000002,4.1929999999999996,5.0579999999999998,7.0970000000000004,7.0289999999999999,7.1639999999999997,6.0620000000000003,5.0949999999999998,7.4779999999999998,5.2960000000000003,4.3499999999999996,4.6820000000000004]}},"visible":true}],"traces":[0]},{"name":"2011","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COM","COG","COD","CRI","HRV","CYP","CZE","DNK","DJI","DOM","ECU","EGY","SLV","EST","SWZ","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HKG","HUN","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LSO","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","NPL","NLD","NZL","NIC","NER","MKD","OMN","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SDN","SWE","SYR","TWN","TJK","TZA","THA","TGO","TTO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[3.8319999999999999,5.867,5.3170000000000002,5.5890000000000004,6.7759999999999998,4.2599999999999998,7.4059999999999997,7.4710000000000001,4.6799999999999997,4.8239999999999998,4.9859999999999998,5.2249999999999996,7.1109999999999998,3.8700000000000001,5.7789999999999999,4.9950000000000001,3.52,7.0380000000000003,3.875,4.7850000000000001,3.706,4.1609999999999996,4.4340000000000002,7.4260000000000002,3.6779999999999999,4.3929999999999998,6.5259999999999998,5.0369999999999999,6.4640000000000004,3.8380000000000001,4.5099999999999998,4.5170000000000003,7.2290000000000001,5.3849999999999998,6.6900000000000004,6.3310000000000004,7.7880000000000003,4.3689999999999998,5.3970000000000002,5.7949999999999999,4.1740000000000004,4.7409999999999997,5.4870000000000001,4.867,7.3540000000000001,6.9589999999999996,4.2549999999999999,4.2030000000000003,6.6210000000000004,5.6079999999999997,5.3719999999999999,5.7430000000000003,4.0449999999999999,4.8449999999999998,4.9610000000000003,5.4740000000000002,4.9180000000000001,4.6349999999999998,5.173,4.7679999999999998,4.7249999999999996,7.0069999999999997,7.4329999999999998,6.0570000000000004,5.3739999999999997,6.2629999999999999,5.5389999999999997,5.7359999999999998,4.4050000000000002,6.3780000000000001,4.9210000000000003,4.7039999999999997,4.9669999999999996,5.1879999999999997,4.8979999999999997,5.4320000000000004,7.101,4.3810000000000002,3.9460000000000002,5.7859999999999996,4.6669999999999998,6.1550000000000002,4.7850000000000001,5.4770000000000003,6.9100000000000001,5.7919999999999998,5.0309999999999997,5.2229999999999999,5.085,4.9710000000000001,3.8090000000000002,7.5640000000000001,7.1909999999999998,5.3860000000000001,4.556,4.8979999999999997,6.8529999999999998,5.2670000000000003,7.2480000000000002,5.6769999999999996,5.8920000000000003,4.9939999999999998,5.6459999999999999,5.2199999999999998,6.5919999999999996,5.0229999999999997,5.3890000000000002,4.0970000000000004,6.7000000000000002,3.8340000000000001,4.8150000000000004,4.5019999999999998,6.5609999999999999,5.9450000000000003,6.0359999999999996,4.931,6.9470000000000001,6.5179999999999998,4.181,4.7510000000000003,4.3140000000000001,7.3819999999999997,4.0380000000000003,6.3090000000000002,4.2629999999999999,4.0739999999999998,6.6639999999999997,2.9359999999999999,6.5190000000000001,4.8760000000000003,5.7919999999999998,5.2720000000000002,4.8259999999999996,5.0830000000000002,7.1189999999999998,6.8689999999999998,7.1150000000000002,6.5540000000000003,5.7389999999999999,6.5800000000000001,5.7670000000000003,3.746,4.9989999999999997,4.8460000000000001],"frame":"2011","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.8319999999999999,5.867,5.3170000000000002,5.5890000000000004,6.7759999999999998,4.2599999999999998,7.4059999999999997,7.4710000000000001,4.6799999999999997,4.8239999999999998,4.9859999999999998,5.2249999999999996,7.1109999999999998,3.8700000000000001,5.7789999999999999,4.9950000000000001,3.52,7.0380000000000003,3.875,4.7850000000000001,3.706,4.1609999999999996,4.4340000000000002,7.4260000000000002,3.6779999999999999,4.3929999999999998,6.5259999999999998,5.0369999999999999,6.4640000000000004,3.8380000000000001,4.5099999999999998,4.5170000000000003,7.2290000000000001,5.3849999999999998,6.6900000000000004,6.3310000000000004,7.7880000000000003,4.3689999999999998,5.3970000000000002,5.7949999999999999,4.1740000000000004,4.7409999999999997,5.4870000000000001,4.867,7.3540000000000001,6.9589999999999996,4.2549999999999999,4.2030000000000003,6.6210000000000004,5.6079999999999997,5.3719999999999999,5.7430000000000003,4.0449999999999999,4.8449999999999998,4.9610000000000003,5.4740000000000002,4.9180000000000001,4.6349999999999998,5.173,4.7679999999999998,4.7249999999999996,7.0069999999999997,7.4329999999999998,6.0570000000000004,5.3739999999999997,6.2629999999999999,5.5389999999999997,5.7359999999999998,4.4050000000000002,6.3780000000000001,4.9210000000000003,4.7039999999999997,4.9669999999999996,5.1879999999999997,4.8979999999999997,5.4320000000000004,7.101,4.3810000000000002,3.9460000000000002,5.7859999999999996,4.6669999999999998,6.1550000000000002,4.7850000000000001,5.4770000000000003,6.9100000000000001,5.7919999999999998,5.0309999999999997,5.2229999999999999,5.085,4.9710000000000001,3.8090000000000002,7.5640000000000001,7.1909999999999998,5.3860000000000001,4.556,4.8979999999999997,6.8529999999999998,5.2670000000000003,7.2480000000000002,5.6769999999999996,5.8920000000000003,4.9939999999999998,5.6459999999999999,5.2199999999999998,6.5919999999999996,5.0229999999999997,5.3890000000000002,4.0970000000000004,6.7000000000000002,3.8340000000000001,4.8150000000000004,4.5019999999999998,6.5609999999999999,5.9450000000000003,6.0359999999999996,4.931,6.9470000000000001,6.5179999999999998,4.181,4.7510000000000003,4.3140000000000001,7.3819999999999997,4.0380000000000003,6.3090000000000002,4.2629999999999999,4.0739999999999998,6.6639999999999997,2.9359999999999999,6.5190000000000001,4.8760000000000003,5.7919999999999998,5.2720000000000002,4.8259999999999996,5.0830000000000002,7.1189999999999998,6.8689999999999998,7.1150000000000002,6.5540000000000003,5.7389999999999999,6.5800000000000001,5.7670000000000003,3.746,4.9989999999999997,4.8460000000000001]}},"visible":true}],"traces":[0]},{"name":"2012","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LBY","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MEX","MDA","MNG","MNE","MAR","MMR","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SDN","SUR","SWE","CHE","SYR","TWN","TJK","TZA","THA","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[3.7829999999999999,5.5099999999999998,5.6050000000000004,4.3600000000000003,6.468,4.3200000000000003,7.1959999999999997,7.4009999999999998,4.9109999999999996,5.0270000000000001,4.7240000000000002,5.7489999999999997,6.9349999999999996,3.1930000000000001,6.0190000000000001,4.7729999999999997,4.8360000000000003,6.6600000000000001,4.2220000000000004,3.9550000000000001,3.899,4.2450000000000001,7.415,4.0330000000000004,6.5990000000000002,5.0949999999999998,6.375,3.956,3.919,4.6390000000000002,7.2720000000000002,6.0279999999999996,6.181,6.3339999999999996,7.5199999999999996,4.7530000000000001,5.9610000000000003,4.2039999999999997,5.9340000000000002,5.3639999999999999,4.5609999999999999,7.4199999999999999,6.649,3.972,4.2539999999999996,6.702,5.0570000000000004,5.0960000000000001,5.8559999999999999,3.6520000000000001,4.4130000000000003,4.6020000000000003,5.484,4.6829999999999998,7.5910000000000002,4.7199999999999998,5.3680000000000003,4.609,4.6600000000000001,6.9649999999999999,7.1109999999999998,5.8390000000000004,5.968,5.1319999999999997,5.7590000000000003,4.5469999999999997,6.2210000000000001,5.2080000000000002,4.8760000000000003,5.125,4.5730000000000004,5.7539999999999996,5.7709999999999999,6.9640000000000004,3.5510000000000002,4.2789999999999999,5.9139999999999997,4.3129999999999997,5.9630000000000001,4.673,7.3200000000000003,5.9960000000000004,4.8849999999999998,5.2190000000000003,4.9699999999999998,4.4390000000000001,4.2329999999999997,7.4710000000000001,7.25,5.4480000000000004,3.798,5.4930000000000003,4.6399999999999997,7.6779999999999999,5.1319999999999997,6.8600000000000003,5.8200000000000003,5.8250000000000002,5.0019999999999998,5.8760000000000003,4.9939999999999998,6.6109999999999998,5.1669999999999998,5.6210000000000004,3.3330000000000002,6.3959999999999999,3.669,5.1550000000000002,5.9109999999999996,6.0629999999999997,5.1340000000000003,6.0030000000000001,6.2910000000000004,4.2249999999999996,4.6470000000000002,4.5499999999999998,6.2690000000000001,7.5599999999999996,7.7759999999999998,3.1640000000000001,6.1260000000000003,4.4969999999999999,4.0069999999999997,6.2999999999999998,4.4640000000000004,5.4640000000000004,5.3090000000000002,4.3090000000000002,5.0300000000000002,7.218,6.8810000000000002,7.0259999999999998,6.4500000000000002,6.0190000000000001,7.0670000000000002,5.5350000000000001,4.0609999999999999,5.0129999999999999,4.9550000000000001],"frame":"2012","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.7829999999999999,5.5099999999999998,5.6050000000000004,4.3600000000000003,6.468,4.3200000000000003,7.1959999999999997,7.4009999999999998,4.9109999999999996,5.0270000000000001,4.7240000000000002,5.7489999999999997,6.9349999999999996,3.1930000000000001,6.0190000000000001,4.7729999999999997,4.8360000000000003,6.6600000000000001,4.2220000000000004,3.9550000000000001,3.899,4.2450000000000001,7.415,4.0330000000000004,6.5990000000000002,5.0949999999999998,6.375,3.956,3.919,4.6390000000000002,7.2720000000000002,6.0279999999999996,6.181,6.3339999999999996,7.5199999999999996,4.7530000000000001,5.9610000000000003,4.2039999999999997,5.9340000000000002,5.3639999999999999,4.5609999999999999,7.4199999999999999,6.649,3.972,4.2539999999999996,6.702,5.0570000000000004,5.0960000000000001,5.8559999999999999,3.6520000000000001,4.4130000000000003,4.6020000000000003,5.484,4.6829999999999998,7.5910000000000002,4.7199999999999998,5.3680000000000003,4.609,4.6600000000000001,6.9649999999999999,7.1109999999999998,5.8390000000000004,5.968,5.1319999999999997,5.7590000000000003,4.5469999999999997,6.2210000000000001,5.2080000000000002,4.8760000000000003,5.125,4.5730000000000004,5.7539999999999996,5.7709999999999999,6.9640000000000004,3.5510000000000002,4.2789999999999999,5.9139999999999997,4.3129999999999997,5.9630000000000001,4.673,7.3200000000000003,5.9960000000000004,4.8849999999999998,5.2190000000000003,4.9699999999999998,4.4390000000000001,4.2329999999999997,7.4710000000000001,7.25,5.4480000000000004,3.798,5.4930000000000003,4.6399999999999997,7.6779999999999999,5.1319999999999997,6.8600000000000003,5.8200000000000003,5.8250000000000002,5.0019999999999998,5.8760000000000003,4.9939999999999998,6.6109999999999998,5.1669999999999998,5.6210000000000004,3.3330000000000002,6.3959999999999999,3.669,5.1550000000000002,5.9109999999999996,6.0629999999999997,5.1340000000000003,6.0030000000000001,6.2910000000000004,4.2249999999999996,4.6470000000000002,4.5499999999999998,6.2690000000000001,7.5599999999999996,7.7759999999999998,3.1640000000000001,6.1260000000000003,4.4969999999999999,4.0069999999999997,6.2999999999999998,4.4640000000000004,5.4640000000000004,5.3090000000000002,4.3090000000000002,5.0300000000000002,7.218,6.8810000000000002,7.0259999999999998,6.4500000000000002,6.0190000000000001,7.0670000000000002,5.5350000000000001,4.0609999999999999,5.0129999999999999,4.9550000000000001]}},"visible":true}],"traces":[0]},{"name":"2013","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BTN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LVA","LBN","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MEX","MDA","MNG","MNE","MAR","MMR","NPL","NLD","NZL","NIC","NER","NGA","MKD","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SWE","SYR","TWN","TJK","TZA","THA","TTO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[3.5720000000000001,4.5510000000000002,3.9369999999999998,6.5819999999999999,4.2770000000000001,7.3639999999999999,7.4989999999999997,5.4809999999999999,6.6900000000000004,4.6600000000000001,5.8760000000000003,7.1040000000000001,3.4790000000000001,5.569,5.7670000000000003,5.1239999999999997,4.1280000000000001,7.1399999999999997,3.9929999999999999,3.3260000000000001,3.6739999999999999,4.2709999999999999,7.5940000000000003,3.508,6.7400000000000002,5.2409999999999997,6.6070000000000002,3.9550000000000001,4.4969999999999999,7.1580000000000004,5.8849999999999998,5.4390000000000001,6.6980000000000004,7.5890000000000004,5.016,6.0190000000000001,3.5590000000000002,6.3250000000000002,5.367,4.4450000000000003,7.4450000000000003,6.6669999999999998,3.7999999999999998,4.3490000000000002,6.9649999999999999,4.9649999999999999,4.7199999999999998,5.9850000000000003,3.9020000000000001,4.6219999999999999,4.7130000000000001,4.9139999999999997,7.5010000000000003,4.4279999999999999,5.2919999999999998,5.1399999999999997,4.7249999999999996,6.7599999999999998,7.3209999999999997,6.0090000000000003,3.7389999999999999,5.7089999999999996,5.9589999999999996,5.1719999999999997,5.835,3.7949999999999999,6.4800000000000004,5.4020000000000001,5.0700000000000003,4.9829999999999997,5.5960000000000001,7.1310000000000002,3.8159999999999998,4.0350000000000001,5.7699999999999996,3.6760000000000002,6.3799999999999999,4.1989999999999998,7.4429999999999996,5.7560000000000002,4.9130000000000003,5.0739999999999998,5.1420000000000003,4.1760000000000002,4.6050000000000004,7.407,7.2800000000000002,5.7720000000000002,3.7160000000000002,4.8179999999999996,5.1859999999999999,5.1379999999999999,6.8659999999999997,5.9359999999999999,5.7830000000000004,4.9770000000000003,5.7460000000000004,5.1580000000000004,5.0819999999999999,5.5369999999999999,3.4660000000000002,6.4950000000000001,3.6469999999999998,5.1020000000000003,4.5140000000000002,6.5330000000000004,5.9370000000000003,5.9749999999999996,3.661,5.9589999999999996,6.1500000000000004,4.3650000000000002,4.8440000000000003,7.4340000000000002,2.6880000000000002,6.3399999999999999,4.9669999999999996,3.8519999999999999,6.2309999999999999,6.1680000000000001,5.2460000000000004,5.3920000000000003,4.8879999999999999,3.71,4.7110000000000003,6.6210000000000004,6.9180000000000001,7.2489999999999997,6.444,5.9400000000000004,6.5529999999999999,5.0229999999999997,4.218,5.2439999999999998,4.6900000000000004],"frame":"2013","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.5720000000000001,4.5510000000000002,3.9369999999999998,6.5819999999999999,4.2770000000000001,7.3639999999999999,7.4989999999999997,5.4809999999999999,6.6900000000000004,4.6600000000000001,5.8760000000000003,7.1040000000000001,3.4790000000000001,5.569,5.7670000000000003,5.1239999999999997,4.1280000000000001,7.1399999999999997,3.9929999999999999,3.3260000000000001,3.6739999999999999,4.2709999999999999,7.5940000000000003,3.508,6.7400000000000002,5.2409999999999997,6.6070000000000002,3.9550000000000001,4.4969999999999999,7.1580000000000004,5.8849999999999998,5.4390000000000001,6.6980000000000004,7.5890000000000004,5.016,6.0190000000000001,3.5590000000000002,6.3250000000000002,5.367,4.4450000000000003,7.4450000000000003,6.6669999999999998,3.7999999999999998,4.3490000000000002,6.9649999999999999,4.9649999999999999,4.7199999999999998,5.9850000000000003,3.9020000000000001,4.6219999999999999,4.7130000000000001,4.9139999999999997,7.5010000000000003,4.4279999999999999,5.2919999999999998,5.1399999999999997,4.7249999999999996,6.7599999999999998,7.3209999999999997,6.0090000000000003,3.7389999999999999,5.7089999999999996,5.9589999999999996,5.1719999999999997,5.835,3.7949999999999999,6.4800000000000004,5.4020000000000001,5.0700000000000003,4.9829999999999997,5.5960000000000001,7.1310000000000002,3.8159999999999998,4.0350000000000001,5.7699999999999996,3.6760000000000002,6.3799999999999999,4.1989999999999998,7.4429999999999996,5.7560000000000002,4.9130000000000003,5.0739999999999998,5.1420000000000003,4.1760000000000002,4.6050000000000004,7.407,7.2800000000000002,5.7720000000000002,3.7160000000000002,4.8179999999999996,5.1859999999999999,5.1379999999999999,6.8659999999999997,5.9359999999999999,5.7830000000000004,4.9770000000000003,5.7460000000000004,5.1580000000000004,5.0819999999999999,5.5369999999999999,3.4660000000000002,6.4950000000000001,3.6469999999999998,5.1020000000000003,4.5140000000000002,6.5330000000000004,5.9370000000000003,5.9749999999999996,3.661,5.9589999999999996,6.1500000000000004,4.3650000000000002,4.8440000000000003,7.4340000000000002,2.6880000000000002,6.3399999999999999,4.9669999999999996,3.8519999999999999,6.2309999999999999,6.1680000000000001,5.2460000000000004,5.3920000000000003,4.8879999999999999,3.71,4.7110000000000003,6.6210000000000004,6.9180000000000001,7.2489999999999997,6.444,5.9400000000000004,6.5529999999999999,5.0229999999999997,4.218,5.2439999999999998,4.6900000000000004]}},"visible":true}],"traces":[0]},{"name":"2014","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BLZ","BEN","BTN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","TCD","CHL","CHN","COL","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HKG","HUN","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LVA","LBN","LBR","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MMR","NAM","NPL","NLD","NZL","NIC","NER","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","SOM","ZAF","KOR","SSD","ESP","LKA","PSE","SDN","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[3.1309999999999998,4.8140000000000001,6.3550000000000004,3.7949999999999999,6.6710000000000003,4.4530000000000003,7.2889999999999997,6.9500000000000002,5.2519999999999998,6.165,4.6360000000000001,5.8120000000000003,6.8550000000000004,5.9560000000000004,3.347,4.9390000000000001,5.8650000000000002,5.2489999999999997,4.0309999999999997,6.9809999999999999,4.4379999999999997,3.4809999999999999,2.9049999999999998,3.883,4.2400000000000002,7.3040000000000003,3.46,6.8440000000000003,5.1959999999999997,6.4489999999999998,4.056,4.4139999999999997,7.2469999999999999,5.3810000000000002,5.6269999999999998,6.484,7.508,5.3869999999999996,5.9459999999999997,4.8849999999999998,5.8570000000000002,5.556,4.5069999999999997,7.3849999999999998,6.4669999999999996,3.9180000000000001,4.2880000000000003,6.984,3.8599999999999999,4.7560000000000002,6.5359999999999996,3.4119999999999999,3.8889999999999998,5.056,5.4580000000000002,5.181,4.4240000000000004,5.5970000000000004,4.6820000000000004,4.5419999999999998,7.0179999999999998,7.4009999999999998,6.0270000000000001,3.5699999999999998,5.3109999999999999,5.923,5.3330000000000002,5.9699999999999998,4.9050000000000002,6.1799999999999997,5.2519999999999998,5.7290000000000001,5.2329999999999997,4.5709999999999997,6.1260000000000003,6.891,3.6760000000000002,4.5629999999999997,5.9630000000000001,3.9750000000000001,6.452,4.4829999999999997,5.6479999999999997,6.6799999999999997,5.9169999999999998,4.8250000000000002,5.2830000000000004,4.7859999999999996,4.5739999999999998,4.9749999999999996,7.3209999999999997,7.306,6.2750000000000004,4.181,5.2039999999999997,7.444,5.4359999999999999,6.6310000000000002,5.1189999999999998,5.8659999999999997,5.3129999999999997,5.75,5.1269999999999998,5.7270000000000003,6.0369999999999999,3.5960000000000001,6.2779999999999996,4.3949999999999996,5.1130000000000004,4.5,7.0620000000000003,6.1390000000000002,5.6779999999999999,5.5279999999999996,4.8280000000000003,5.8010000000000002,3.8319999999999999,6.4560000000000004,4.2679999999999998,4.7220000000000004,4.1390000000000002,7.2389999999999999,7.4930000000000003,6.3630000000000004,4.8959999999999999,3.4830000000000001,6.9850000000000003,2.839,4.7640000000000002,5.7869999999999999,5.5800000000000001,3.77,4.2969999999999997,6.54,6.758,7.1509999999999998,6.5609999999999999,6.0490000000000004,6.1360000000000001,5.085,3.968,4.3460000000000001,4.1840000000000002],"frame":"2014","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.1309999999999998,4.8140000000000001,6.3550000000000004,3.7949999999999999,6.6710000000000003,4.4530000000000003,7.2889999999999997,6.9500000000000002,5.2519999999999998,6.165,4.6360000000000001,5.8120000000000003,6.8550000000000004,5.9560000000000004,3.347,4.9390000000000001,5.8650000000000002,5.2489999999999997,4.0309999999999997,6.9809999999999999,4.4379999999999997,3.4809999999999999,2.9049999999999998,3.883,4.2400000000000002,7.3040000000000003,3.46,6.8440000000000003,5.1959999999999997,6.4489999999999998,4.056,4.4139999999999997,7.2469999999999999,5.3810000000000002,5.6269999999999998,6.484,7.508,5.3869999999999996,5.9459999999999997,4.8849999999999998,5.8570000000000002,5.556,4.5069999999999997,7.3849999999999998,6.4669999999999996,3.9180000000000001,4.2880000000000003,6.984,3.8599999999999999,4.7560000000000002,6.5359999999999996,3.4119999999999999,3.8889999999999998,5.056,5.4580000000000002,5.181,4.4240000000000004,5.5970000000000004,4.6820000000000004,4.5419999999999998,7.0179999999999998,7.4009999999999998,6.0270000000000001,3.5699999999999998,5.3109999999999999,5.923,5.3330000000000002,5.9699999999999998,4.9050000000000002,6.1799999999999997,5.2519999999999998,5.7290000000000001,5.2329999999999997,4.5709999999999997,6.1260000000000003,6.891,3.6760000000000002,4.5629999999999997,5.9630000000000001,3.9750000000000001,6.452,4.4829999999999997,5.6479999999999997,6.6799999999999997,5.9169999999999998,4.8250000000000002,5.2830000000000004,4.7859999999999996,4.5739999999999998,4.9749999999999996,7.3209999999999997,7.306,6.2750000000000004,4.181,5.2039999999999997,7.444,5.4359999999999999,6.6310000000000002,5.1189999999999998,5.8659999999999997,5.3129999999999997,5.75,5.1269999999999998,5.7270000000000003,6.0369999999999999,3.5960000000000001,6.2779999999999996,4.3949999999999996,5.1130000000000004,4.5,7.0620000000000003,6.1390000000000002,5.6779999999999999,5.5279999999999996,4.8280000000000003,5.8010000000000002,3.8319999999999999,6.4560000000000004,4.2679999999999998,4.7220000000000004,4.1390000000000002,7.2389999999999999,7.4930000000000003,6.3630000000000004,4.8959999999999999,3.4830000000000001,6.9850000000000003,2.839,4.7640000000000002,5.7869999999999999,5.5800000000000001,3.77,4.2969999999999997,6.54,6.758,7.1509999999999998,6.5609999999999999,6.0490000000000004,6.1360000000000001,5.085,3.968,4.3460000000000001,4.1840000000000002]}},"visible":true}],"traces":[0]},{"name":"2015","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BTN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JPN","JOR","KAZ","KEN","KWT","KGZ","LVA","LBN","LBR","LBY","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","SOM","ZAF","KOR","SSD","ESP","LKA","PSE","SWE","CHE","SYR","TWN","TJK","TZA","THA","TGO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[3.9830000000000001,4.6070000000000002,6.6970000000000001,4.3479999999999999,7.3090000000000002,7.0759999999999996,5.1470000000000002,6.0069999999999997,4.633,5.7190000000000003,6.9039999999999999,3.625,5.0819999999999999,5.8339999999999996,5.117,3.762,6.5469999999999997,4.8650000000000002,4.4189999999999996,4.1619999999999999,5.0380000000000003,7.4130000000000003,4.3230000000000004,6.5330000000000004,5.3040000000000003,6.3879999999999999,4.6909999999999998,3.903,6.8540000000000001,5.2050000000000001,5.4390000000000001,6.6079999999999997,7.5140000000000002,5.0620000000000003,5.9640000000000004,4.7629999999999999,6.0179999999999998,5.6289999999999996,4.5730000000000004,7.4480000000000004,6.3579999999999997,4.6609999999999996,4.1219999999999999,7.0369999999999999,3.9860000000000002,5.6230000000000002,6.4649999999999999,3.5049999999999999,3.5699999999999998,4.8449999999999998,5.3440000000000003,7.4980000000000002,4.3419999999999996,5.0430000000000001,4.75,4.4930000000000003,6.8300000000000001,7.0789999999999997,5.8479999999999999,4.4450000000000003,5.8799999999999999,5.4050000000000002,5.9500000000000002,4.3579999999999997,6.1459999999999999,4.9050000000000002,5.8810000000000002,5.1719999999999997,2.702,5.6150000000000002,5.7110000000000003,6.702,3.593,3.8679999999999999,6.3220000000000001,4.5819999999999999,6.6130000000000004,3.923,6.2359999999999998,6.0170000000000003,4.9829999999999997,5.125,5.1630000000000003,4.5499999999999998,4.2240000000000002,4.8120000000000003,7.3239999999999998,7.4180000000000001,5.9240000000000004,3.6709999999999998,4.9329999999999998,4.976,7.6029999999999998,4.8230000000000004,6.6059999999999999,5.5599999999999996,5.577,5.5469999999999997,6.0069999999999997,5.0810000000000004,6.375,5.7770000000000001,5.9960000000000004,3.4830000000000001,6.3449999999999998,4.617,5.3179999999999996,4.9089999999999998,6.6200000000000001,6.1619999999999999,5.7409999999999997,5.3540000000000001,4.8869999999999996,5.7800000000000002,4.0709999999999997,6.3810000000000002,4.6120000000000001,4.6950000000000003,7.2889999999999997,7.5720000000000001,3.4620000000000002,6.4500000000000002,5.1239999999999997,3.661,6.202,3.7679999999999998,5.1319999999999997,5.7910000000000004,5.5140000000000002,4.2380000000000004,3.9649999999999999,6.5679999999999996,6.5149999999999997,6.8639999999999999,6.6280000000000001,5.9720000000000004,5.569,5.0759999999999996,2.9830000000000001,4.843,3.7029999999999998],"frame":"2015","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.9830000000000001,4.6070000000000002,6.6970000000000001,4.3479999999999999,7.3090000000000002,7.0759999999999996,5.1470000000000002,6.0069999999999997,4.633,5.7190000000000003,6.9039999999999999,3.625,5.0819999999999999,5.8339999999999996,5.117,3.762,6.5469999999999997,4.8650000000000002,4.4189999999999996,4.1619999999999999,5.0380000000000003,7.4130000000000003,4.3230000000000004,6.5330000000000004,5.3040000000000003,6.3879999999999999,4.6909999999999998,3.903,6.8540000000000001,5.2050000000000001,5.4390000000000001,6.6079999999999997,7.5140000000000002,5.0620000000000003,5.9640000000000004,4.7629999999999999,6.0179999999999998,5.6289999999999996,4.5730000000000004,7.4480000000000004,6.3579999999999997,4.6609999999999996,4.1219999999999999,7.0369999999999999,3.9860000000000002,5.6230000000000002,6.4649999999999999,3.5049999999999999,3.5699999999999998,4.8449999999999998,5.3440000000000003,7.4980000000000002,4.3419999999999996,5.0430000000000001,4.75,4.4930000000000003,6.8300000000000001,7.0789999999999997,5.8479999999999999,4.4450000000000003,5.8799999999999999,5.4050000000000002,5.9500000000000002,4.3579999999999997,6.1459999999999999,4.9050000000000002,5.8810000000000002,5.1719999999999997,2.702,5.6150000000000002,5.7110000000000003,6.702,3.593,3.8679999999999999,6.3220000000000001,4.5819999999999999,6.6130000000000004,3.923,6.2359999999999998,6.0170000000000003,4.9829999999999997,5.125,5.1630000000000003,4.5499999999999998,4.2240000000000002,4.8120000000000003,7.3239999999999998,7.4180000000000001,5.9240000000000004,3.6709999999999998,4.9329999999999998,4.976,7.6029999999999998,4.8230000000000004,6.6059999999999999,5.5599999999999996,5.577,5.5469999999999997,6.0069999999999997,5.0810000000000004,6.375,5.7770000000000001,5.9960000000000004,3.4830000000000001,6.3449999999999998,4.617,5.3179999999999996,4.9089999999999998,6.6200000000000001,6.1619999999999999,5.7409999999999997,5.3540000000000001,4.8869999999999996,5.7800000000000002,4.0709999999999997,6.3810000000000002,4.6120000000000001,4.6950000000000003,7.2889999999999997,7.5720000000000001,3.4620000000000002,6.4500000000000002,5.1239999999999997,3.661,6.202,3.7679999999999998,5.1319999999999997,5.7910000000000004,5.5140000000000002,4.2380000000000004,3.9649999999999999,6.5679999999999996,6.5149999999999997,6.8639999999999999,6.6280000000000001,5.9720000000000004,5.569,5.0759999999999996,2.9830000000000001,4.843,3.7029999999999998]}},"visible":true}],"traces":[0]},{"name":"2016","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JPN","JOR","KAZ","KEN","KWT","KGZ","LVA","LBN","LSO","LBR","LBY","LTU","LUX","MDG","MWI","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MMR","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","SOM","ZAF","KOR","SSD","ESP","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[4.2199999999999998,4.5110000000000001,5.3410000000000002,6.4269999999999996,4.3250000000000002,7.25,7.048,5.3040000000000003,6.1699999999999999,4.556,5.1779999999999999,6.9489999999999998,4.0069999999999997,5.7699999999999996,5.181,3.4990000000000001,6.375,4.8380000000000001,4.2060000000000004,4.4610000000000003,4.8159999999999998,7.2450000000000001,2.6930000000000001,4.0289999999999999,6.5789999999999997,5.3250000000000002,6.234,4.1189999999999998,4.5220000000000002,7.1360000000000001,5.4169999999999998,5.7949999999999999,6.7359999999999998,7.5579999999999998,5.2389999999999999,6.1150000000000002,4.5570000000000004,6.1399999999999997,5.6500000000000004,4.298,7.6600000000000001,6.4749999999999996,4.8319999999999999,4.4480000000000004,6.8739999999999997,4.5140000000000002,5.3029999999999999,6.359,3.6030000000000002,3.3519999999999999,5.6479999999999997,5.4980000000000002,5.4489999999999998,7.5099999999999998,4.1790000000000003,5.1360000000000001,4.6529999999999996,4.4130000000000003,7.0410000000000004,7.1589999999999998,5.9550000000000001,4.5430000000000001,5.9550000000000001,5.2709999999999999,5.5339999999999998,4.3959999999999999,5.9470000000000001,4.8570000000000002,5.9400000000000004,5.2709999999999999,3.8079999999999998,3.355,5.4340000000000002,5.8659999999999997,6.9669999999999996,3.6629999999999998,3.476,4.016,6.5910000000000002,4.4720000000000004,5.6100000000000003,6.8239999999999998,5.5780000000000003,5.0570000000000004,5.3040000000000003,5.3860000000000001,4.6230000000000002,5.0999999999999996,7.5410000000000004,7.226,6.0129999999999999,4.2350000000000003,5.2199999999999998,5.3460000000000001,7.5960000000000001,5.5490000000000004,6.1180000000000003,5.8010000000000002,5.7009999999999996,5.431,6.1619999999999999,5.4470000000000001,5.9690000000000003,5.8550000000000004,3.3330000000000002,6.4740000000000002,4.5949999999999998,5.7530000000000001,4.7329999999999997,6.0330000000000004,5.9930000000000003,5.9370000000000003,4.6680000000000001,4.7699999999999996,5.9710000000000001,2.8879999999999999,6.319,4.907,7.3689999999999998,7.4589999999999996,6.5129999999999999,5.1040000000000001,2.903,6.0739999999999998,3.879,4.5209999999999999,5.8869999999999996,5.3259999999999996,4.2329999999999997,4.0289999999999999,6.8310000000000004,6.8239999999999998,6.8040000000000003,6.1710000000000003,5.8929999999999998,4.0410000000000004,5.0620000000000003,3.8260000000000001,4.3479999999999999,3.7349999999999999],"frame":"2016","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.2199999999999998,4.5110000000000001,5.3410000000000002,6.4269999999999996,4.3250000000000002,7.25,7.048,5.3040000000000003,6.1699999999999999,4.556,5.1779999999999999,6.9489999999999998,4.0069999999999997,5.7699999999999996,5.181,3.4990000000000001,6.375,4.8380000000000001,4.2060000000000004,4.4610000000000003,4.8159999999999998,7.2450000000000001,2.6930000000000001,4.0289999999999999,6.5789999999999997,5.3250000000000002,6.234,4.1189999999999998,4.5220000000000002,7.1360000000000001,5.4169999999999998,5.7949999999999999,6.7359999999999998,7.5579999999999998,5.2389999999999999,6.1150000000000002,4.5570000000000004,6.1399999999999997,5.6500000000000004,4.298,7.6600000000000001,6.4749999999999996,4.8319999999999999,4.4480000000000004,6.8739999999999997,4.5140000000000002,5.3029999999999999,6.359,3.6030000000000002,3.3519999999999999,5.6479999999999997,5.4980000000000002,5.4489999999999998,7.5099999999999998,4.1790000000000003,5.1360000000000001,4.6529999999999996,4.4130000000000003,7.0410000000000004,7.1589999999999998,5.9550000000000001,4.5430000000000001,5.9550000000000001,5.2709999999999999,5.5339999999999998,4.3959999999999999,5.9470000000000001,4.8570000000000002,5.9400000000000004,5.2709999999999999,3.8079999999999998,3.355,5.4340000000000002,5.8659999999999997,6.9669999999999996,3.6629999999999998,3.476,4.016,6.5910000000000002,4.4720000000000004,5.6100000000000003,6.8239999999999998,5.5780000000000003,5.0570000000000004,5.3040000000000003,5.3860000000000001,4.6230000000000002,5.0999999999999996,7.5410000000000004,7.226,6.0129999999999999,4.2350000000000003,5.2199999999999998,5.3460000000000001,7.5960000000000001,5.5490000000000004,6.1180000000000003,5.8010000000000002,5.7009999999999996,5.431,6.1619999999999999,5.4470000000000001,5.9690000000000003,5.8550000000000004,3.3330000000000002,6.4740000000000002,4.5949999999999998,5.7530000000000001,4.7329999999999997,6.0330000000000004,5.9930000000000003,5.9370000000000003,4.6680000000000001,4.7699999999999996,5.9710000000000001,2.8879999999999999,6.319,4.907,7.3689999999999998,7.4589999999999996,6.5129999999999999,5.1040000000000001,2.903,6.0739999999999998,3.879,4.5209999999999999,5.8869999999999996,5.3259999999999996,4.2329999999999997,4.0289999999999999,6.8310000000000004,6.8239999999999998,6.8040000000000003,6.1710000000000003,5.8929999999999998,4.0410000000000004,5.0620000000000003,3.8260000000000001,4.3479999999999999,3.7349999999999999]}},"visible":true}],"traces":[0]},{"name":"2017","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GMB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LTU","LUX","MDG","MWI","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","SSD","ESP","LKA","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TTO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[2.6619999999999999,4.6399999999999997,5.2489999999999997,6.0389999999999997,4.2880000000000003,7.2569999999999997,7.2939999999999996,5.1520000000000001,6.2270000000000003,4.3099999999999996,5.5529999999999999,6.9279999999999999,4.8529999999999998,5.6509999999999998,5.0899999999999999,3.5049999999999999,6.3330000000000002,5.0970000000000004,4.6470000000000002,4.5860000000000003,5.0739999999999998,7.415,3.476,4.5590000000000002,6.3200000000000003,5.0990000000000002,6.157,4.8840000000000003,4.3109999999999999,7.2249999999999996,5.343,6.0620000000000003,6.79,7.5940000000000003,5.6050000000000004,5.8399999999999999,3.9289999999999998,6.3390000000000004,5.9379999999999997,4.1799999999999997,7.7880000000000003,6.6349999999999998,4.782,4.1180000000000003,4.4509999999999996,7.0739999999999998,5.4809999999999999,5.1479999999999997,6.3250000000000002,4.8739999999999997,3.8239999999999998,6.0199999999999996,5.3620000000000001,6.0650000000000004,7.476,4.0460000000000003,5.0979999999999999,4.7169999999999996,4.4619999999999997,7.0599999999999996,7.3310000000000004,6.1989999999999998,5.0380000000000003,5.8899999999999997,5.9109999999999996,4.8079999999999998,5.8819999999999997,4.476,6.0940000000000003,5.6299999999999999,4.6230000000000002,5.9779999999999998,5.1539999999999999,3.7949999999999999,4.4240000000000004,5.6470000000000002,6.2729999999999997,7.0609999999999999,4.0789999999999997,3.4169999999999998,4.742,6.6760000000000002,4.6779999999999999,6.1740000000000004,6.4100000000000001,5.3259999999999996,5.3339999999999996,5.6150000000000002,5.3120000000000003,4.2800000000000002,4.1539999999999999,4.4409999999999998,4.7370000000000001,7.4589999999999996,7.327,6.476,4.6159999999999997,5.3220000000000001,5.234,7.5789999999999997,5.8310000000000004,6.5679999999999996,5.7130000000000001,5.7110000000000003,5.5940000000000003,6.2009999999999996,5.7110000000000003,6.0899999999999999,5.5789999999999997,3.1080000000000001,6.2939999999999996,4.6829999999999998,5.1219999999999999,4.0899999999999999,6.3780000000000001,6.3659999999999997,6.1669999999999998,4.5140000000000002,5.8739999999999997,2.8170000000000002,6.2300000000000004,4.3310000000000004,4.6280000000000001,7.2869999999999999,7.4740000000000002,6.359,5.8289999999999997,3.347,5.9390000000000001,4.3609999999999998,6.1920000000000002,4.1239999999999997,5.2290000000000001,5.6070000000000002,4.0010000000000003,4.3109999999999999,7.0389999999999997,7.1029999999999998,6.992,6.3360000000000003,6.4210000000000003,5.0709999999999997,5.1749999999999998,3.254,3.9329999999999998,3.6379999999999999],"frame":"2017","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.6619999999999999,4.6399999999999997,5.2489999999999997,6.0389999999999997,4.2880000000000003,7.2569999999999997,7.2939999999999996,5.1520000000000001,6.2270000000000003,4.3099999999999996,5.5529999999999999,6.9279999999999999,4.8529999999999998,5.6509999999999998,5.0899999999999999,3.5049999999999999,6.3330000000000002,5.0970000000000004,4.6470000000000002,4.5860000000000003,5.0739999999999998,7.415,3.476,4.5590000000000002,6.3200000000000003,5.0990000000000002,6.157,4.8840000000000003,4.3109999999999999,7.2249999999999996,5.343,6.0620000000000003,6.79,7.5940000000000003,5.6050000000000004,5.8399999999999999,3.9289999999999998,6.3390000000000004,5.9379999999999997,4.1799999999999997,7.7880000000000003,6.6349999999999998,4.782,4.1180000000000003,4.4509999999999996,7.0739999999999998,5.4809999999999999,5.1479999999999997,6.3250000000000002,4.8739999999999997,3.8239999999999998,6.0199999999999996,5.3620000000000001,6.0650000000000004,7.476,4.0460000000000003,5.0979999999999999,4.7169999999999996,4.4619999999999997,7.0599999999999996,7.3310000000000004,6.1989999999999998,5.0380000000000003,5.8899999999999997,5.9109999999999996,4.8079999999999998,5.8819999999999997,4.476,6.0940000000000003,5.6299999999999999,4.6230000000000002,5.9779999999999998,5.1539999999999999,3.7949999999999999,4.4240000000000004,5.6470000000000002,6.2729999999999997,7.0609999999999999,4.0789999999999997,3.4169999999999998,4.742,6.6760000000000002,4.6779999999999999,6.1740000000000004,6.4100000000000001,5.3259999999999996,5.3339999999999996,5.6150000000000002,5.3120000000000003,4.2800000000000002,4.1539999999999999,4.4409999999999998,4.7370000000000001,7.4589999999999996,7.327,6.476,4.6159999999999997,5.3220000000000001,5.234,7.5789999999999997,5.8310000000000004,6.5679999999999996,5.7130000000000001,5.7110000000000003,5.5940000000000003,6.2009999999999996,5.7110000000000003,6.0899999999999999,5.5789999999999997,3.1080000000000001,6.2939999999999996,4.6829999999999998,5.1219999999999999,4.0899999999999999,6.3780000000000001,6.3659999999999997,6.1669999999999998,4.5140000000000002,5.8739999999999997,2.8170000000000002,6.2300000000000004,4.3310000000000004,4.6280000000000001,7.2869999999999999,7.4740000000000002,6.359,5.8289999999999997,3.347,5.9390000000000001,4.3609999999999998,6.1920000000000002,4.1239999999999997,5.2290000000000001,5.6070000000000002,4.0010000000000003,4.3109999999999999,7.0389999999999997,7.1029999999999998,6.992,6.3360000000000003,6.4210000000000003,5.0709999999999997,5.1749999999999998,3.254,3.9329999999999998,3.6379999999999999]}},"visible":true}],"traces":[0]},{"name":"2018","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","COG","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","SWZ","ETH","FIN","FRA","GAB","GMB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JPN","JOR","KAZ","KEN","KGZ","LAO","LVA","LBN","LBR","LBY","LTU","LUX","MDG","MWI","MYS","MDV","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[2.694,5.0039999999999996,5.0430000000000001,5.7930000000000001,5.0620000000000003,7.1769999999999996,7.3959999999999999,5.1680000000000001,4.4989999999999997,5.234,6.8920000000000003,5.8200000000000003,5.9160000000000004,5.8869999999999996,3.4609999999999999,6.1909999999999998,5.0990000000000002,4.9269999999999996,3.7749999999999999,5.1219999999999999,5.2510000000000003,7.1749999999999998,4.4859999999999998,6.4359999999999999,5.1310000000000002,5.984,3.9729999999999999,5.4900000000000002,7.141,5.5359999999999996,6.2759999999999998,7.0339999999999998,7.649,5.4329999999999998,6.1280000000000001,4.0049999999999999,6.2409999999999997,6.0910000000000002,4.2119999999999997,4.3789999999999996,7.8579999999999997,6.6660000000000004,4.7830000000000004,4.9219999999999997,4.6589999999999998,7.1180000000000003,5.0039999999999996,5.4089999999999998,6.6269999999999998,5.2519999999999998,3.6150000000000002,5.9080000000000004,5.9359999999999999,3.8180000000000001,5.3399999999999999,4.2779999999999996,4.8860000000000001,6.9619999999999997,6.9269999999999996,6.5170000000000003,5.2679999999999998,5.7939999999999996,4.6390000000000002,6.008,4.6559999999999997,5.2969999999999997,4.859,5.9009999999999998,5.1669999999999998,4.1349999999999998,5.4939999999999998,6.3090000000000002,7.2430000000000003,4.0709999999999997,3.335,5.3390000000000004,5.1980000000000004,4.4160000000000004,6.9100000000000001,4.3140000000000001,5.8819999999999997,6.5499999999999998,5.6820000000000004,5.4649999999999999,5.6500000000000004,4.8970000000000002,4.6539999999999999,4.4109999999999996,4.8339999999999996,4.9100000000000001,7.4630000000000001,7.3700000000000001,5.819,5.1639999999999997,5.2519999999999998,5.2400000000000002,7.444,5.4720000000000004,6.2809999999999997,5.6799999999999997,5.8689999999999998,6.1109999999999998,5.9199999999999999,6.1509999999999998,5.5140000000000002,3.5609999999999999,6.3559999999999999,4.7690000000000001,5.9359999999999999,4.306,6.375,6.2350000000000003,6.2489999999999997,4.8840000000000003,5.8399999999999999,6.5129999999999999,4.4349999999999996,4.5540000000000003,7.375,7.5090000000000003,6.4669999999999996,5.4969999999999999,3.4449999999999998,6.0119999999999996,4.0229999999999997,4.7409999999999997,4.6210000000000004,5.1859999999999999,4.3220000000000001,4.6619999999999999,6.6040000000000001,7.2329999999999997,6.883,6.3719999999999999,6.2050000000000001,5.0060000000000002,5.2960000000000003,3.0579999999999998,4.0410000000000004,3.6160000000000001],"frame":"2018","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.694,5.0039999999999996,5.0430000000000001,5.7930000000000001,5.0620000000000003,7.1769999999999996,7.3959999999999999,5.1680000000000001,4.4989999999999997,5.234,6.8920000000000003,5.8200000000000003,5.9160000000000004,5.8869999999999996,3.4609999999999999,6.1909999999999998,5.0990000000000002,4.9269999999999996,3.7749999999999999,5.1219999999999999,5.2510000000000003,7.1749999999999998,4.4859999999999998,6.4359999999999999,5.1310000000000002,5.984,3.9729999999999999,5.4900000000000002,7.141,5.5359999999999996,6.2759999999999998,7.0339999999999998,7.649,5.4329999999999998,6.1280000000000001,4.0049999999999999,6.2409999999999997,6.0910000000000002,4.2119999999999997,4.3789999999999996,7.8579999999999997,6.6660000000000004,4.7830000000000004,4.9219999999999997,4.6589999999999998,7.1180000000000003,5.0039999999999996,5.4089999999999998,6.6269999999999998,5.2519999999999998,3.6150000000000002,5.9080000000000004,5.9359999999999999,3.8180000000000001,5.3399999999999999,4.2779999999999996,4.8860000000000001,6.9619999999999997,6.9269999999999996,6.5170000000000003,5.2679999999999998,5.7939999999999996,4.6390000000000002,6.008,4.6559999999999997,5.2969999999999997,4.859,5.9009999999999998,5.1669999999999998,4.1349999999999998,5.4939999999999998,6.3090000000000002,7.2430000000000003,4.0709999999999997,3.335,5.3390000000000004,5.1980000000000004,4.4160000000000004,6.9100000000000001,4.3140000000000001,5.8819999999999997,6.5499999999999998,5.6820000000000004,5.4649999999999999,5.6500000000000004,4.8970000000000002,4.6539999999999999,4.4109999999999996,4.8339999999999996,4.9100000000000001,7.4630000000000001,7.3700000000000001,5.819,5.1639999999999997,5.2519999999999998,5.2400000000000002,7.444,5.4720000000000004,6.2809999999999997,5.6799999999999997,5.8689999999999998,6.1109999999999998,5.9199999999999999,6.1509999999999998,5.5140000000000002,3.5609999999999999,6.3559999999999999,4.7690000000000001,5.9359999999999999,4.306,6.375,6.2350000000000003,6.2489999999999997,4.8840000000000003,5.8399999999999999,6.5129999999999999,4.4349999999999996,4.5540000000000003,7.375,7.5090000000000003,6.4669999999999996,5.4969999999999999,3.4449999999999998,6.0119999999999996,4.0229999999999997,4.7409999999999997,4.6210000000000004,5.1859999999999999,4.3220000000000001,4.6619999999999999,6.6040000000000001,7.2329999999999997,6.883,6.3719999999999999,6.2050000000000001,5.0060000000000002,5.2960000000000003,3.0579999999999998,4.0410000000000004,3.6160000000000001]}},"visible":true}],"traces":[0]},{"name":"2019","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","COG","CRI","HRV","CYP","DNK","DOM","ECU","EGY","SLV","EST","SWZ","ETH","FIN","FRA","GAB","GMB","GEO","DEU","GHA","GRC","GTM","GIN","HND","HKG","HUN","ISL","IND","IDN","IRN","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TKM","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[2.375,4.9950000000000001,4.7450000000000001,6.0860000000000003,5.4880000000000004,7.234,7.1950000000000003,5.173,7.0979999999999999,5.1139999999999999,5.8209999999999997,6.7720000000000002,4.976,5.6740000000000004,6.016,3.4710000000000001,6.4509999999999996,5.1079999999999997,4.7409999999999997,4.9980000000000002,4.9370000000000003,7.109,4.2510000000000003,5.9420000000000002,5.1440000000000001,6.3499999999999996,4.609,5.2130000000000001,6.9980000000000002,5.6260000000000003,6.1369999999999996,7.6929999999999996,6.0039999999999996,5.8090000000000002,4.3280000000000003,6.4550000000000001,6.0350000000000001,4.3959999999999999,4.0999999999999996,7.7800000000000002,6.6900000000000004,4.9139999999999997,5.1639999999999997,4.8920000000000003,7.0350000000000001,4.9669999999999996,5.952,6.2619999999999996,4.7679999999999998,5.9299999999999997,5.6589999999999998,6,7.5330000000000004,3.2490000000000001,5.3470000000000004,5.0060000000000002,7.2549999999999999,7.3319999999999999,6.4450000000000003,5.3920000000000003,6.3090000000000002,5.9080000000000004,4.4530000000000003,6.2720000000000002,4.6189999999999998,6.1059999999999999,5.6849999999999996,5.1970000000000001,5.9699999999999998,4.024,3.512,5.1210000000000004,5.3300000000000001,6.0640000000000001,7.4039999999999999,4.3390000000000004,3.8690000000000002,5.4279999999999999,4.9880000000000004,6.7329999999999997,4.1529999999999996,6.2409999999999997,6.4320000000000004,5.8029999999999999,5.5629999999999997,5.3860000000000001,5.0570000000000004,4.9320000000000004,4.4340000000000002,4.4359999999999999,5.4489999999999998,7.4249999999999998,7.2050000000000001,6.1130000000000004,5.0039999999999996,4.266,5.0149999999999997,7.4420000000000002,4.4429999999999996,6.0860000000000003,5.6529999999999996,5.9989999999999997,6.2679999999999998,6.242,6.0949999999999998,6.1299999999999999,5.4409999999999998,3.2679999999999998,6.5609999999999999,5.4889999999999999,6.2409999999999997,3.4470000000000001,6.3780000000000001,6.2430000000000003,6.665,5.0350000000000001,5.9029999999999996,6.4569999999999999,4.2130000000000001,4.4829999999999997,7.3979999999999997,7.694,6.5369999999999999,5.4640000000000004,3.6400000000000001,6.0220000000000002,4.1790000000000003,4.3150000000000004,5.4740000000000002,4.8719999999999999,4.9480000000000004,4.702,6.7110000000000003,7.157,6.944,6.5999999999999996,6.1539999999999999,5.0810000000000004,5.4669999999999996,4.1970000000000001,3.3069999999999999,2.694],"frame":"2019","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.375,4.9950000000000001,4.7450000000000001,6.0860000000000003,5.4880000000000004,7.234,7.1950000000000003,5.173,7.0979999999999999,5.1139999999999999,5.8209999999999997,6.7720000000000002,4.976,5.6740000000000004,6.016,3.4710000000000001,6.4509999999999996,5.1079999999999997,4.7409999999999997,4.9980000000000002,4.9370000000000003,7.109,4.2510000000000003,5.9420000000000002,5.1440000000000001,6.3499999999999996,4.609,5.2130000000000001,6.9980000000000002,5.6260000000000003,6.1369999999999996,7.6929999999999996,6.0039999999999996,5.8090000000000002,4.3280000000000003,6.4550000000000001,6.0350000000000001,4.3959999999999999,4.0999999999999996,7.7800000000000002,6.6900000000000004,4.9139999999999997,5.1639999999999997,4.8920000000000003,7.0350000000000001,4.9669999999999996,5.952,6.2619999999999996,4.7679999999999998,5.9299999999999997,5.6589999999999998,6,7.5330000000000004,3.2490000000000001,5.3470000000000004,5.0060000000000002,7.2549999999999999,7.3319999999999999,6.4450000000000003,5.3920000000000003,6.3090000000000002,5.9080000000000004,4.4530000000000003,6.2720000000000002,4.6189999999999998,6.1059999999999999,5.6849999999999996,5.1970000000000001,5.9699999999999998,4.024,3.512,5.1210000000000004,5.3300000000000001,6.0640000000000001,7.4039999999999999,4.3390000000000004,3.8690000000000002,5.4279999999999999,4.9880000000000004,6.7329999999999997,4.1529999999999996,6.2409999999999997,6.4320000000000004,5.8029999999999999,5.5629999999999997,5.3860000000000001,5.0570000000000004,4.9320000000000004,4.4340000000000002,4.4359999999999999,5.4489999999999998,7.4249999999999998,7.2050000000000001,6.1130000000000004,5.0039999999999996,4.266,5.0149999999999997,7.4420000000000002,4.4429999999999996,6.0860000000000003,5.6529999999999996,5.9989999999999997,6.2679999999999998,6.242,6.0949999999999998,6.1299999999999999,5.4409999999999998,3.2679999999999998,6.5609999999999999,5.4889999999999999,6.2409999999999997,3.4470000000000001,6.3780000000000001,6.2430000000000003,6.665,5.0350000000000001,5.9029999999999996,6.4569999999999999,4.2130000000000001,4.4829999999999997,7.3979999999999997,7.694,6.5369999999999999,5.4640000000000004,3.6400000000000001,6.0220000000000002,4.1790000000000003,4.3150000000000004,5.4740000000000002,4.8719999999999999,4.9480000000000004,4.702,6.7110000000000003,7.157,6.944,6.5999999999999996,6.1539999999999999,5.0810000000000004,5.4669999999999996,4.1970000000000001,3.3069999999999999,2.694]}},"visible":true}],"traces":[0]},{"name":"2020","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["ALB","DZA","ARG","AUS","AUT","BHR","BGD","BEL","BEN","BOL","BIH","BRA","BGR","BFA","KHM","CMR","CAN","CHL","CHN","COL","COG","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GIN","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KGZ","LAO","LVA","LBN","LTU","MYS","MLI","MLT","MUS","MEX","MDA","MNG","MNE","MAR","MMR","NAM","NPL","NLD","NZL","NIC","NGA","MKD","NOR","PAK","PRY","PER","PHL","POL","PRT","ROU","RUS","SAU","SEN","SRB","SVK","SVN","ZAF","KOR","ESP","LKA","SWE","CHE","TWN","TJK","TZA","THA","TUN","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","ZMB","ZWE"],"z":[5.3650000000000002,5.4379999999999997,5.9009999999999998,7.1369999999999996,7.2130000000000001,6.173,5.2800000000000002,6.8390000000000004,4.4080000000000004,5.5590000000000002,5.516,6.1100000000000003,5.5979999999999999,4.6399999999999997,4.3769999999999998,5.2409999999999997,7.0250000000000004,6.1509999999999998,5.7709999999999999,5.7089999999999996,5.0789999999999997,6.3380000000000001,6.508,6.2599999999999998,6.8970000000000002,7.5149999999999997,5.1680000000000001,5.3540000000000001,4.4720000000000004,5.4619999999999997,6.4530000000000003,4.5490000000000004,7.8890000000000002,6.7140000000000004,4.8869999999999996,5.1230000000000002,7.3120000000000003,5.319,5.7880000000000003,4.9720000000000004,5.2949999999999999,6.0380000000000003,7.5750000000000002,4.2240000000000002,4.8280000000000003,4.8650000000000002,4.7850000000000001,7.0350000000000001,7.1950000000000003,6.4880000000000004,5.2569999999999997,5.4249999999999998,6.1180000000000003,4.0940000000000003,6.1680000000000001,4.5469999999999997,6.25,5.2839999999999998,6.2290000000000001,2.6339999999999999,6.391,6.0140000000000002,4.2690000000000001,6.157,6.0149999999999997,5.9640000000000004,5.8120000000000003,6.0110000000000001,5.7220000000000004,4.8029999999999999,4.431,4.4509999999999996,5.9820000000000002,7.5039999999999996,7.2569999999999997,6.2869999999999999,5.5030000000000001,5.0540000000000003,7.29,4.6239999999999997,5.5010000000000003,4.9939999999999998,5.0800000000000001,6.1390000000000002,5.7679999999999998,6.7850000000000001,5.4950000000000001,6.5599999999999996,4.7569999999999997,6.0419999999999998,6.5190000000000001,6.4619999999999997,4.9470000000000001,5.7930000000000001,6.5019999999999998,4.7779999999999996,7.3140000000000001,7.508,6.7510000000000003,5.3730000000000002,3.786,5.8849999999999998,4.7309999999999999,4.8620000000000001,4.641,5.2699999999999996,6.4580000000000002,6.798,7.0279999999999996,6.3099999999999996,5.8419999999999996,4.5739999999999998,5.4619999999999997,4.8380000000000001,3.1600000000000001],"frame":"2020","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[5.3650000000000002,5.4379999999999997,5.9009999999999998,7.1369999999999996,7.2130000000000001,6.173,5.2800000000000002,6.8390000000000004,4.4080000000000004,5.5590000000000002,5.516,6.1100000000000003,5.5979999999999999,4.6399999999999997,4.3769999999999998,5.2409999999999997,7.0250000000000004,6.1509999999999998,5.7709999999999999,5.7089999999999996,5.0789999999999997,6.3380000000000001,6.508,6.2599999999999998,6.8970000000000002,7.5149999999999997,5.1680000000000001,5.3540000000000001,4.4720000000000004,5.4619999999999997,6.4530000000000003,4.5490000000000004,7.8890000000000002,6.7140000000000004,4.8869999999999996,5.1230000000000002,7.3120000000000003,5.319,5.7880000000000003,4.9720000000000004,5.2949999999999999,6.0380000000000003,7.5750000000000002,4.2240000000000002,4.8280000000000003,4.8650000000000002,4.7850000000000001,7.0350000000000001,7.1950000000000003,6.4880000000000004,5.2569999999999997,5.4249999999999998,6.1180000000000003,4.0940000000000003,6.1680000000000001,4.5469999999999997,6.25,5.2839999999999998,6.2290000000000001,2.6339999999999999,6.391,6.0140000000000002,4.2690000000000001,6.157,6.0149999999999997,5.9640000000000004,5.8120000000000003,6.0110000000000001,5.7220000000000004,4.8029999999999999,4.431,4.4509999999999996,5.9820000000000002,7.5039999999999996,7.2569999999999997,6.2869999999999999,5.5030000000000001,5.0540000000000003,7.29,4.6239999999999997,5.5010000000000003,4.9939999999999998,5.0800000000000001,6.1390000000000002,5.7679999999999998,6.7850000000000001,5.4950000000000001,6.5599999999999996,4.7569999999999997,6.0419999999999998,6.5190000000000001,6.4619999999999997,4.9470000000000001,5.7930000000000001,6.5019999999999998,4.7779999999999996,7.3140000000000001,7.508,6.7510000000000003,5.3730000000000002,3.786,5.8849999999999998,4.7309999999999999,4.8620000000000001,4.641,5.2699999999999996,6.4580000000000002,6.798,7.0279999999999996,6.3099999999999996,5.8419999999999996,4.5739999999999998,5.4619999999999997,4.8380000000000001,3.1600000000000001]}},"visible":true}],"traces":[0]},{"name":"2021","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","BGD","BEL","BEN","BOL","BIH","BRA","BGR","BFA","KHM","CMR","CAN","CHL","CHN","COL","COG","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GIN","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KGZ","LAO","LVA","LBN","LTU","MWI","MYS","MLI","MLT","MUS","MEX","MDA","MNG","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","ZMB","ZWE"],"z":[2.4359999999999999,5.2549999999999999,5.2169999999999996,5.9080000000000004,5.3010000000000002,7.1120000000000001,7.0800000000000001,4.1230000000000002,6.8819999999999997,4.4930000000000003,5.569,5.7489999999999997,6.0099999999999998,5.4219999999999997,4.6360000000000001,4.5549999999999997,4.9630000000000001,6.9390000000000001,6.4359999999999999,5.8630000000000004,5.29,4.9210000000000003,6.4080000000000004,6.2869999999999999,6.2690000000000001,6.9420000000000002,7.6989999999999998,6.0309999999999997,5.4349999999999996,4.0259999999999998,6.431,6.5540000000000003,7.7939999999999996,6.6559999999999997,5.0750000000000002,4.9109999999999996,6.7549999999999999,4.3780000000000001,6.1040000000000001,4.9450000000000003,6.1139999999999999,5.3220000000000001,6.2270000000000003,7.5650000000000004,3.5579999999999998,5.4329999999999998,4.7880000000000003,5.0940000000000003,6.8280000000000003,7.5780000000000003,6.4669999999999996,5.056,5.8140000000000001,6.0910000000000002,3.9089999999999998,6.2599999999999998,4.4649999999999999,5.5640000000000001,4.9269999999999996,6.3529999999999998,2.1789999999999998,6.8650000000000002,3.6349999999999998,6.0099999999999998,4.1130000000000004,6.444,5.9489999999999998,5.9909999999999997,5.9589999999999996,5.7210000000000001,5.3259999999999996,5.1779999999999999,4.3140000000000001,4.4909999999999997,4.6219999999999999,7.3140000000000001,7.1369999999999996,6.0949999999999998,4.4790000000000001,5.5350000000000001,7.3620000000000001,4.4870000000000001,6.5529999999999999,5.5759999999999996,5.694,5.9649999999999999,5.9779999999999998,6.1829999999999998,6.5490000000000004,5.4480000000000004,6.4450000000000003,4.9029999999999996,6.2450000000000001,3.714,6.5869999999999997,6.4189999999999996,6.7610000000000001,5.5990000000000002,6.1130000000000004,6.4699999999999998,4.1029999999999998,7.4390000000000001,7.3280000000000003,6.2469999999999999,5.2869999999999999,3.681,5.6379999999999999,4.0369999999999999,4.4989999999999997,4.367,4.2249999999999996,5.3109999999999999,6.7329999999999997,6.867,6.9589999999999996,6.5019999999999998,6.1849999999999996,5.1079999999999997,5.54,3.0819999999999999,3.1549999999999998],"frame":"2021","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.4359999999999999,5.2549999999999999,5.2169999999999996,5.9080000000000004,5.3010000000000002,7.1120000000000001,7.0800000000000001,4.1230000000000002,6.8819999999999997,4.4930000000000003,5.569,5.7489999999999997,6.0099999999999998,5.4219999999999997,4.6360000000000001,4.5549999999999997,4.9630000000000001,6.9390000000000001,6.4359999999999999,5.8630000000000004,5.29,4.9210000000000003,6.4080000000000004,6.2869999999999999,6.2690000000000001,6.9420000000000002,7.6989999999999998,6.0309999999999997,5.4349999999999996,4.0259999999999998,6.431,6.5540000000000003,7.7939999999999996,6.6559999999999997,5.0750000000000002,4.9109999999999996,6.7549999999999999,4.3780000000000001,6.1040000000000001,4.9450000000000003,6.1139999999999999,5.3220000000000001,6.2270000000000003,7.5650000000000004,3.5579999999999998,5.4329999999999998,4.7880000000000003,5.0940000000000003,6.8280000000000003,7.5780000000000003,6.4669999999999996,5.056,5.8140000000000001,6.0910000000000002,3.9089999999999998,6.2599999999999998,4.4649999999999999,5.5640000000000001,4.9269999999999996,6.3529999999999998,2.1789999999999998,6.8650000000000002,3.6349999999999998,6.0099999999999998,4.1130000000000004,6.444,5.9489999999999998,5.9909999999999997,5.9589999999999996,5.7210000000000001,5.3259999999999996,5.1779999999999999,4.3140000000000001,4.4909999999999997,4.6219999999999999,7.3140000000000001,7.1369999999999996,6.0949999999999998,4.4790000000000001,5.5350000000000001,7.3620000000000001,4.4870000000000001,6.5529999999999999,5.5759999999999996,5.694,5.9649999999999999,5.9779999999999998,6.1829999999999998,6.5490000000000004,5.4480000000000004,6.4450000000000003,4.9029999999999996,6.2450000000000001,3.714,6.5869999999999997,6.4189999999999996,6.7610000000000001,5.5990000000000002,6.1130000000000004,6.4699999999999998,4.1029999999999998,7.4390000000000001,7.3280000000000003,6.2469999999999999,5.2869999999999999,3.681,5.6379999999999999,4.0369999999999999,4.4989999999999997,4.367,4.2249999999999996,5.3109999999999999,6.7329999999999997,6.867,6.9589999999999996,6.5019999999999998,6.1849999999999996,5.1079999999999997,5.54,3.0819999999999999,3.1549999999999998]}},"visible":true}],"traces":[0]},{"name":"2022","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BGD","BEL","BEN","BOL","BIH","BWA","BRA","BGR","KHM","CMR","CAN","TCD","CHL","COL","COM","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","SWZ","ETH","FIN","FRA","GAB","GMB","GEO","DEU","GHA","GRC","GTM","GIN","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JAM","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[1.2809999999999999,5.2119999999999997,5.5380000000000003,6.2610000000000001,5.3819999999999997,7.0350000000000001,6.9989999999999997,4.5759999999999996,3.4079999999999999,6.8570000000000002,4.2169999999999996,5.9290000000000003,5.8719999999999999,3.4350000000000001,6.2569999999999997,5.3780000000000001,4.25,4.7119999999999997,6.9180000000000001,4.3970000000000002,6.415,5.8920000000000003,3.5449999999999999,5.8049999999999997,3.2069999999999999,7.077,5.5789999999999997,5.8650000000000002,6.6950000000000003,7.5449999999999999,5.5179999999999998,5.8869999999999996,4.024,6.492,6.3570000000000002,3.5019999999999998,3.6280000000000001,7.7290000000000001,6.6139999999999999,5.1399999999999997,4.2789999999999999,5.2930000000000001,6.6079999999999997,4.1909999999999998,5.9000000000000004,6.1500000000000004,5.3170000000000002,5.9320000000000004,5.3109999999999999,5.8609999999999998,7.4489999999999998,3.9300000000000002,5.585,4.9770000000000003,4.9279999999999999,6.8700000000000001,7.6619999999999999,6.258,4.8490000000000002,5.8700000000000001,6.1779999999999999,4.3559999999999999,6.0060000000000002,4.4480000000000004,6.758,5.6680000000000001,4.9619999999999997,6.0549999999999997,2.3519999999999999,3.1859999999999999,4.0419999999999998,5.7599999999999998,7.0380000000000003,7.2279999999999998,4.0190000000000001,3.3559999999999999,6.048,4.2110000000000003,6.2990000000000004,4.7240000000000002,5.7409999999999997,7.0380000000000003,5.6870000000000003,5.7880000000000003,5.5999999999999996,4.5960000000000001,4.7400000000000002,4.359,4.9489999999999998,5.4740000000000002,7.3899999999999997,6.9749999999999996,6.3920000000000003,4.5010000000000003,5.2939999999999996,5.1669999999999998,7.2949999999999999,4.931,5.9790000000000001,6.1379999999999999,5.8920000000000003,5.9950000000000001,6.6660000000000004,5.9530000000000003,6.4370000000000003,6.0439999999999996,6.3819999999999997,4.907,6.5460000000000003,2.5600000000000001,6.3330000000000002,6.0910000000000002,6.7229999999999999,5.5810000000000004,5.9500000000000002,6.3369999999999997,3.9849999999999999,4.9080000000000004,7.431,6.8840000000000003,6.6070000000000002,5.1760000000000002,3.6160000000000001,6.0069999999999997,4.2389999999999999,4.2610000000000001,5.093,4.4249999999999998,4.6369999999999996,6.7380000000000004,6.7220000000000004,6.6929999999999996,6.6710000000000003,6.016,5.9489999999999998,6.2670000000000003,3.5899999999999999,3.7280000000000002,3.2959999999999998],"frame":"2022","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[1.2809999999999999,5.2119999999999997,5.5380000000000003,6.2610000000000001,5.3819999999999997,7.0350000000000001,6.9989999999999997,4.5759999999999996,3.4079999999999999,6.8570000000000002,4.2169999999999996,5.9290000000000003,5.8719999999999999,3.4350000000000001,6.2569999999999997,5.3780000000000001,4.25,4.7119999999999997,6.9180000000000001,4.3970000000000002,6.415,5.8920000000000003,3.5449999999999999,5.8049999999999997,3.2069999999999999,7.077,5.5789999999999997,5.8650000000000002,6.6950000000000003,7.5449999999999999,5.5179999999999998,5.8869999999999996,4.024,6.492,6.3570000000000002,3.5019999999999998,3.6280000000000001,7.7290000000000001,6.6139999999999999,5.1399999999999997,4.2789999999999999,5.2930000000000001,6.6079999999999997,4.1909999999999998,5.9000000000000004,6.1500000000000004,5.3170000000000002,5.9320000000000004,5.3109999999999999,5.8609999999999998,7.4489999999999998,3.9300000000000002,5.585,4.9770000000000003,4.9279999999999999,6.8700000000000001,7.6619999999999999,6.258,4.8490000000000002,5.8700000000000001,6.1779999999999999,4.3559999999999999,6.0060000000000002,4.4480000000000004,6.758,5.6680000000000001,4.9619999999999997,6.0549999999999997,2.3519999999999999,3.1859999999999999,4.0419999999999998,5.7599999999999998,7.0380000000000003,7.2279999999999998,4.0190000000000001,3.3559999999999999,6.048,4.2110000000000003,6.2990000000000004,4.7240000000000002,5.7409999999999997,7.0380000000000003,5.6870000000000003,5.7880000000000003,5.5999999999999996,4.5960000000000001,4.7400000000000002,4.359,4.9489999999999998,5.4740000000000002,7.3899999999999997,6.9749999999999996,6.3920000000000003,4.5010000000000003,5.2939999999999996,5.1669999999999998,7.2949999999999999,4.931,5.9790000000000001,6.1379999999999999,5.8920000000000003,5.9950000000000001,6.6660000000000004,5.9530000000000003,6.4370000000000003,6.0439999999999996,6.3819999999999997,4.907,6.5460000000000003,2.5600000000000001,6.3330000000000002,6.0910000000000002,6.7229999999999999,5.5810000000000004,5.9500000000000002,6.3369999999999997,3.9849999999999999,4.9080000000000004,7.431,6.8840000000000003,6.6070000000000002,5.1760000000000002,3.6160000000000001,6.0069999999999997,4.2389999999999999,4.2610000000000001,5.093,4.4249999999999998,4.6369999999999996,6.7380000000000004,6.7220000000000004,6.6929999999999996,6.6710000000000003,6.016,5.9489999999999998,6.2670000000000003,3.5899999999999999,3.7280000000000002,3.2959999999999998]}},"visible":true}],"traces":[0]},{"name":"2023","data":[{"colorbar":{"title":"life_ladder","ticklen":2},"colorscale":"Viridis","showscale":true,"locations":["AFG","ALB","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","COG","COD","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GMB","GEO","DEU","GHA","GRC","GTM","GIN","HND","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","CIV","JPN","JOR","KAZ","KEN","KWT","KGZ","LAO","LVA","LBN","LBR","LBY","LTU","LUX","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","MKD","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","ROU","RUS","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","PSE","SWE","CHE","TWN","TJK","TZA","THA","TGO","TUN","TUR","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE"],"z":[1.446,5.4450000000000003,6.3929999999999998,5.6790000000000003,7.0250000000000004,6.6360000000000001,5.2140000000000004,5.9589999999999996,4.1139999999999999,6.944,4.4199999999999999,5.8600000000000003,6.0090000000000003,3.3319999999999999,6.5529999999999999,5.5899999999999999,4.4619999999999997,4.2210000000000001,4.9459999999999997,6.8410000000000002,4.5439999999999996,6.2300000000000004,6.1449999999999996,5.9039999999999999,3.5880000000000001,4.9539999999999997,3.383,7.3840000000000003,5.9580000000000002,6.0709999999999997,6.827,7.5039999999999996,5.9210000000000003,5.8520000000000003,3.8809999999999998,6.4820000000000002,6.4299999999999997,4.093,7.6989999999999998,6.5570000000000004,5.1040000000000001,4.6909999999999998,5.351,6.7919999999999998,4.298,5.7960000000000003,6.4210000000000003,4.827,5.8609999999999998,5.9649999999999999,7.5620000000000003,4.6760000000000002,5.6950000000000003,5.0039999999999996,5.4749999999999996,6.8170000000000002,6.7830000000000004,6.2450000000000001,5.3369999999999997,5.9100000000000001,4.2919999999999998,6.2990000000000004,4.4960000000000004,7.1299999999999999,5.9100000000000001,5.4859999999999998,6.2960000000000003,3.5880000000000001,4.4939999999999998,5.9699999999999998,6.5529999999999999,7.016,4.4329999999999998,3.2719999999999998,5.8680000000000003,4.3700000000000001,6.2949999999999999,4.2919999999999998,5.7590000000000003,7.0060000000000002,5.8010000000000002,5.5800000000000001,5.8129999999999997,4.4870000000000001,5.7039999999999997,4.391,5.0549999999999997,5.3890000000000002,7.2549999999999999,6.976,6.3620000000000001,4.609,4.8689999999999998,5.4029999999999996,7.2489999999999997,4.5490000000000004,6.5430000000000001,6.2140000000000004,5.9359999999999999,6.1840000000000002,6.6849999999999996,5.9539999999999997,6.4889999999999999,5.8650000000000002,6.9530000000000003,5.093,6.4409999999999998,3.4670000000000001,6.6539999999999999,6.2610000000000001,6.7460000000000004,5.0759999999999996,6.1120000000000001,6.4560000000000004,3.6019999999999999,4.851,7.1609999999999996,6.9690000000000003,6.6550000000000002,5.3789999999999996,4.0419999999999998,6.282,4.3650000000000002,4.5049999999999999,5.4630000000000001,4.4669999999999996,4.6719999999999997,6.7279999999999998,6.6580000000000004,6.5209999999999999,6.6619999999999999,6.3849999999999998,5.7649999999999997,6.3250000000000002,3.532,3.6859999999999999,3.5720000000000001],"frame":"2023","type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":1.2809999999999999,"cmax":8.0190000000000001,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[1.446,5.4450000000000003,6.3929999999999998,5.6790000000000003,7.0250000000000004,6.6360000000000001,5.2140000000000004,5.9589999999999996,4.1139999999999999,6.944,4.4199999999999999,5.8600000000000003,6.0090000000000003,3.3319999999999999,6.5529999999999999,5.5899999999999999,4.4619999999999997,4.2210000000000001,4.9459999999999997,6.8410000000000002,4.5439999999999996,6.2300000000000004,6.1449999999999996,5.9039999999999999,3.5880000000000001,4.9539999999999997,3.383,7.3840000000000003,5.9580000000000002,6.0709999999999997,6.827,7.5039999999999996,5.9210000000000003,5.8520000000000003,3.8809999999999998,6.4820000000000002,6.4299999999999997,4.093,7.6989999999999998,6.5570000000000004,5.1040000000000001,4.6909999999999998,5.351,6.7919999999999998,4.298,5.7960000000000003,6.4210000000000003,4.827,5.8609999999999998,5.9649999999999999,7.5620000000000003,4.6760000000000002,5.6950000000000003,5.0039999999999996,5.4749999999999996,6.8170000000000002,6.7830000000000004,6.2450000000000001,5.3369999999999997,5.9100000000000001,4.2919999999999998,6.2990000000000004,4.4960000000000004,7.1299999999999999,5.9100000000000001,5.4859999999999998,6.2960000000000003,3.5880000000000001,4.4939999999999998,5.9699999999999998,6.5529999999999999,7.016,4.4329999999999998,3.2719999999999998,5.8680000000000003,4.3700000000000001,6.2949999999999999,4.2919999999999998,5.7590000000000003,7.0060000000000002,5.8010000000000002,5.5800000000000001,5.8129999999999997,4.4870000000000001,5.7039999999999997,4.391,5.0549999999999997,5.3890000000000002,7.2549999999999999,6.976,6.3620000000000001,4.609,4.8689999999999998,5.4029999999999996,7.2489999999999997,4.5490000000000004,6.5430000000000001,6.2140000000000004,5.9359999999999999,6.1840000000000002,6.6849999999999996,5.9539999999999997,6.4889999999999999,5.8650000000000002,6.9530000000000003,5.093,6.4409999999999998,3.4670000000000001,6.6539999999999999,6.2610000000000001,6.7460000000000004,5.0759999999999996,6.1120000000000001,6.4560000000000004,3.6019999999999999,4.851,7.1609999999999996,6.9690000000000003,6.6550000000000002,5.3789999999999996,4.0419999999999998,6.282,4.3650000000000002,4.5049999999999999,5.4630000000000001,4.4669999999999996,4.6719999999999997,6.7279999999999998,6.6580000000000004,6.5209999999999999,6.6619999999999999,6.3849999999999998,5.7649999999999997,6.3250000000000002,3.532,3.6859999999999999,3.5720000000000001]}},"visible":true}],"traces":[0]}],"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">##We take the original happiness dataset and add a new column called iso3</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Plotly requires ISO3 codes in the locations argument.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb43" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "World Happiness Analysis-Kaggle dataset"</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Ashish Verma"</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="an">month:</span><span class="co"> "November-2025"</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span><span class="co"> cosmo</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools-fold:</span><span class="co"> true</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co">#List of required packages</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"readxl"</span>, <span class="st">"janitor"</span>, <span class="st">"broom"</span>, <span class="st">"plotly"</span>, <span class="st">"countrycode"</span>, <span class="st">"tidyr"</span>)</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a><span class="co">#Install missing packages</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (pkg <span class="cf">in</span> packages) {</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(pkg, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(pkg)</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a><span class="co">#Load all packages</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a><span class="co">#Q1:Read happiness dataset (use "Alt + -" for &lt;-)</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>happiness <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../data/happiness.xlsx"</span>)</span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a><span class="co">#Quick look at the data</span></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(happiness)</span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a><span class="co">#we see that each column names appear with space between them, lets put "_" in place of space </span></span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>happiness <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../data/happiness.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="co"># converts all column names into tidy, R-friendly names</span></span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a><span class="co">#check if the column names got cleaned (check structure using glimpse)</span></span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(happiness)</span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-65"><a href="#cb43-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-66"><a href="#cb43-66" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2: Which countries and years included in the dataset?</span></span>
<span id="cb43-67"><a href="#cb43-67" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2.1: Unique list of countries</span></span>
<span id="cb43-68"><a href="#cb43-68" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb43-69"><a href="#cb43-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(country_name) <span class="sc">|&gt;</span> <span class="co">#distinct() finds unique values</span></span>
<span id="cb43-70"><a href="#cb43-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(country_name) <span class="co">#arrange() sorts alphabetically</span></span>
<span id="cb43-71"><a href="#cb43-71" aria-hidden="true" tabindex="-1"></a><span class="co">#Q2.2: Unique list of years</span></span>
<span id="cb43-72"><a href="#cb43-72" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb43-73"><a href="#cb43-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(year) <span class="sc">|&gt;</span> <span class="co">#distinct() finds unique values</span></span>
<span id="cb43-74"><a href="#cb43-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span>
<span id="cb43-75"><a href="#cb43-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-76"><a href="#cb43-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-79"><a href="#cb43-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-80"><a href="#cb43-80" aria-hidden="true" tabindex="-1"></a><span class="co">#Q3: How many years of data does each country have?</span></span>
<span id="cb43-81"><a href="#cb43-81" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb43-82"><a href="#cb43-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(country_name, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="co">#sort used to sort result in descending order</span></span>
<span id="cb43-83"><a href="#cb43-83" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-84"><a href="#cb43-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-87"><a href="#cb43-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-88"><a href="#cb43-88" aria-hidden="true" tabindex="-1"></a><span class="co">#Q4: What is the average Life Ladder (happiness score) for each year?</span></span>
<span id="cb43-89"><a href="#cb43-89" aria-hidden="true" tabindex="-1"></a>happiness <span class="sc">|&gt;</span></span>
<span id="cb43-90"><a href="#cb43-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb43-91"><a href="#cb43-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-92"><a href="#cb43-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-93"><a href="#cb43-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_countries =</span> <span class="fu">n</span>()</span>
<span id="cb43-94"><a href="#cb43-94" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb43-95"><a href="#cb43-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span>
<span id="cb43-96"><a href="#cb43-96" aria-hidden="true" tabindex="-1"></a><span class="co">#summarise(): calculates summary values inside each group</span></span>
<span id="cb43-97"><a href="#cb43-97" aria-hidden="true" tabindex="-1"></a><span class="co">#na.rm = TRUE: </span></span>
<span id="cb43-98"><a href="#cb43-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-99"><a href="#cb43-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-102"><a href="#cb43-102" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-103"><a href="#cb43-103" aria-hidden="true" tabindex="-1"></a><span class="co">#Q5: Classify life Ladder scores into High, Medium, and Low groups based on quartiles and add this as a new column</span></span>
<span id="cb43-104"><a href="#cb43-104" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1 — Create ladder_group using ntile()</span></span>
<span id="cb43-105"><a href="#cb43-105" aria-hidden="true" tabindex="-1"></a>happiness_grouped <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-106"><a href="#cb43-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-107"><a href="#cb43-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">ladder_group =</span> <span class="fu">case_when</span>( <span class="co"># case_when() lets us assign a category based on conditions</span></span>
<span id="cb43-108"><a href="#cb43-108" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"High"</span>, <span class="co"># divides the numeric variable into 4 equal sized groups (quartiles)</span></span>
<span id="cb43-109"><a href="#cb43-109" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">~</span> <span class="st">"Medium"</span>, <span class="co"># Q1: bottom 25%; Q2-3: Middle 50%; Q4: Top 25%</span></span>
<span id="cb43-110"><a href="#cb43-110" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ntile</span>(life_ladder, <span class="dv">4</span>) <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Low"</span></span>
<span id="cb43-111"><a href="#cb43-111" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-112"><a href="#cb43-112" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-113"><a href="#cb43-113" aria-hidden="true" tabindex="-1"></a><span class="co">#After case_when(), the column is a character vector: e.g., "High"</span></span>
<span id="cb43-114"><a href="#cb43-114" aria-hidden="true" tabindex="-1"></a><span class="co">#also, Character vectors are alphabetically ordered when plotted or summarized: High, Low, Medium- this is not the logical order of happiness</span></span>
<span id="cb43-115"><a href="#cb43-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-116"><a href="#cb43-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Optional ordered factor </span></span>
<span id="cb43-117"><a href="#cb43-117" aria-hidden="true" tabindex="-1"></a>happiness_grouped <span class="ot">&lt;-</span> happiness_grouped <span class="sc">|&gt;</span></span>
<span id="cb43-118"><a href="#cb43-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-119"><a href="#cb43-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">ladder_group =</span> <span class="fu">factor</span>(ladder_group, <span class="co">#A factor is a categorical variable with controlled order</span></span>
<span id="cb43-120"><a href="#cb43-120" aria-hidden="true" tabindex="-1"></a>                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span>))</span>
<span id="cb43-121"><a href="#cb43-121" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-122"><a href="#cb43-122" aria-hidden="true" tabindex="-1"></a>happiness_grouped</span>
<span id="cb43-123"><a href="#cb43-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-124"><a href="#cb43-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-127"><a href="#cb43-127" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-128"><a href="#cb43-128" aria-hidden="true" tabindex="-1"></a><span class="co">#Q5: List all countries where Happiness Score is above the global mean</span></span>
<span id="cb43-129"><a href="#cb43-129" aria-hidden="true" tabindex="-1"></a><span class="co">#Step1: Calculate global mean happiness score</span></span>
<span id="cb43-130"><a href="#cb43-130" aria-hidden="true" tabindex="-1"></a>global_mean_happiness <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-131"><a href="#cb43-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">global_mean =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="co"># returns a tibble with one row and one column, not a numeric value</span></span>
<span id="cb43-132"><a href="#cb43-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(global_mean) <span class="co"># extracts the value and turn into a pure numeric vector</span></span>
<span id="cb43-133"><a href="#cb43-133" aria-hidden="true" tabindex="-1"></a>global_mean_happiness</span>
<span id="cb43-134"><a href="#cb43-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-135"><a href="#cb43-135" aria-hidden="true" tabindex="-1"></a><span class="co">#Step2: filter countries avove this mean</span></span>
<span id="cb43-136"><a href="#cb43-136" aria-hidden="true" tabindex="-1"></a>above_mean <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-137"><a href="#cb43-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(life_ladder <span class="sc">&gt;</span> global_mean_happiness) <span class="sc">|&gt;</span></span>
<span id="cb43-138"><a href="#cb43-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(life_ladder))</span>
<span id="cb43-139"><a href="#cb43-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-140"><a href="#cb43-140" aria-hidden="true" tabindex="-1"></a>above_mean</span>
<span id="cb43-141"><a href="#cb43-141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-142"><a href="#cb43-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-145"><a href="#cb43-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-146"><a href="#cb43-146" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(happiness)</span>
<span id="cb43-147"><a href="#cb43-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-148"><a href="#cb43-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-151"><a href="#cb43-151" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-152"><a href="#cb43-152" aria-hidden="true" tabindex="-1"></a><span class="co">#Q6: Correlation of life_ladder with all variables</span></span>
<span id="cb43-153"><a href="#cb43-153" aria-hidden="true" tabindex="-1"></a><span class="co">#select numeric variable only</span></span>
<span id="cb43-154"><a href="#cb43-154" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-155"><a href="#cb43-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb43-156"><a href="#cb43-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-157"><a href="#cb43-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-158"><a href="#cb43-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-161"><a href="#cb43-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-162"><a href="#cb43-162" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute correlation of each numeric variable with life_ladder</span></span>
<span id="cb43-163"><a href="#cb43-163" aria-hidden="true" tabindex="-1"></a>life_cor <span class="ot">&lt;-</span> numeric_data <span class="sc">|&gt;</span></span>
<span id="cb43-164"><a href="#cb43-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-165"><a href="#cb43-165" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb43-166"><a href="#cb43-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb43-167"><a href="#cb43-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">cor</span>(.x, life_ladder, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb43-168"><a href="#cb43-168" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-169"><a href="#cb43-169" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-170"><a href="#cb43-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-171"><a href="#cb43-171" aria-hidden="true" tabindex="-1"></a><span class="co">#Pivot longer and remove the self-correlation (1.0)</span></span>
<span id="cb43-172"><a href="#cb43-172" aria-hidden="true" tabindex="-1"></a>life_cor_long <span class="ot">&lt;-</span> life_cor <span class="sc">|&gt;</span></span>
<span id="cb43-173"><a href="#cb43-173" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb43-174"><a href="#cb43-174" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb43-175"><a href="#cb43-175" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb43-176"><a href="#cb43-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"correlation"</span></span>
<span id="cb43-177"><a href="#cb43-177" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-178"><a href="#cb43-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">"life_ladder"</span>)</span>
<span id="cb43-179"><a href="#cb43-179" aria-hidden="true" tabindex="-1"></a><span class="co">#heatmap</span></span>
<span id="cb43-180"><a href="#cb43-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-181"><a href="#cb43-181" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_cor_long, <span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"life_ladder"</span>, <span class="at">fill =</span> correlation)) <span class="sc">+</span></span>
<span id="cb43-182"><a href="#cb43-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb43-183"><a href="#cb43-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(correlation, <span class="dv">2</span>)), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb43-184"><a href="#cb43-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb43-185"><a href="#cb43-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"red"</span>,</span>
<span id="cb43-186"><a href="#cb43-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"blue"</span>,</span>
<span id="cb43-187"><a href="#cb43-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>,</span>
<span id="cb43-188"><a href="#cb43-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb43-189"><a href="#cb43-189" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb43-190"><a href="#cb43-190" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-191"><a href="#cb43-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-192"><a href="#cb43-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation of Life Ladder with All Numeric Variables"</span>,</span>
<span id="cb43-193"><a href="#cb43-193" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variable"</span>,</span>
<span id="cb43-194"><a href="#cb43-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb43-195"><a href="#cb43-195" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-196"><a href="#cb43-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb43-197"><a href="#cb43-197" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb43-198"><a href="#cb43-198" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">35</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb43-199"><a href="#cb43-199" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-200"><a href="#cb43-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-201"><a href="#cb43-201" aria-hidden="true" tabindex="-1"></a><span class="co">#heatmap does not look good, so a barplot plotted</span></span>
<span id="cb43-202"><a href="#cb43-202" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_cor_long, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(variable, correlation), <span class="at">y =</span> correlation)) <span class="sc">+</span></span>
<span id="cb43-203"><a href="#cb43-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb43-204"><a href="#cb43-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb43-205"><a href="#cb43-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(correlation, <span class="dv">2</span>)),</span>
<span id="cb43-206"><a href="#cb43-206" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb43-207"><a href="#cb43-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-208"><a href="#cb43-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation of Life Ladder with All Numeric Variables"</span>,</span>
<span id="cb43-209"><a href="#cb43-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variable"</span>,</span>
<span id="cb43-210"><a href="#cb43-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Correlation"</span></span>
<span id="cb43-211"><a href="#cb43-211" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-212"><a href="#cb43-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb43-213"><a href="#cb43-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-214"><a href="#cb43-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-215"><a href="#cb43-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-218"><a href="#cb43-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-219"><a href="#cb43-219" aria-hidden="true" tabindex="-1"></a><span class="co">#Q7: What is the global happiness trend over time? (Line plot)</span></span>
<span id="cb43-220"><a href="#cb43-220" aria-hidden="true" tabindex="-1"></a><span class="co">#To answer that, for each year we need one number: the mean Life Ladder across all countries that have data in that year.</span></span>
<span id="cb43-221"><a href="#cb43-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-222"><a href="#cb43-222" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate global mean happiness per year</span></span>
<span id="cb43-223"><a href="#cb43-223" aria-hidden="true" tabindex="-1"></a>happiness_yearly <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-224"><a href="#cb43-224" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb43-225"><a href="#cb43-225" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb43-226"><a href="#cb43-226" aria-hidden="true" tabindex="-1"></a><span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-227"><a href="#cb43-227" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-228"><a href="#cb43-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-229"><a href="#cb43-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-232"><a href="#cb43-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-233"><a href="#cb43-233" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb43-234"><a href="#cb43-234" aria-hidden="true" tabindex="-1"></a>happiness_yearly <span class="sc">|&gt;</span></span>
<span id="cb43-235"><a href="#cb43-235" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mean_happiness)) <span class="sc">+</span></span>
<span id="cb43-236"><a href="#cb43-236" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb43-237"><a href="#cb43-237" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-238"><a href="#cb43-238" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb43-239"><a href="#cb43-239" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Global Happiness Trend Over Time"</span>,</span>
<span id="cb43-240"><a href="#cb43-240" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb43-241"><a href="#cb43-241" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Average Life Ladder (Happiness Score)"</span></span>
<span id="cb43-242"><a href="#cb43-242" aria-hidden="true" tabindex="-1"></a>)<span class="sc">+</span></span>
<span id="cb43-243"><a href="#cb43-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb43-244"><a href="#cb43-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-245"><a href="#cb43-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-248"><a href="#cb43-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-249"><a href="#cb43-249" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8: Which countries are the happiest on average across all years?</span></span>
<span id="cb43-250"><a href="#cb43-250" aria-hidden="true" tabindex="-1"></a>country_means <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-251"><a href="#cb43-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span></span>
<span id="cb43-252"><a href="#cb43-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-253"><a href="#cb43-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_happiness =</span> <span class="fu">mean</span>(life_ladder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-254"><a href="#cb43-254" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_years =</span> <span class="fu">n</span>()</span>
<span id="cb43-255"><a href="#cb43-255" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-256"><a href="#cb43-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_happiness))</span>
<span id="cb43-257"><a href="#cb43-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-258"><a href="#cb43-258" aria-hidden="true" tabindex="-1"></a><span class="co">#show top 10 happinest counntries</span></span>
<span id="cb43-259"><a href="#cb43-259" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(country_means, <span class="dv">10</span>)</span>
<span id="cb43-260"><a href="#cb43-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-261"><a href="#cb43-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-264"><a href="#cb43-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-265"><a href="#cb43-265" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8.1: A bar plot of top 10 happiest countries?</span></span>
<span id="cb43-266"><a href="#cb43-266" aria-hidden="true" tabindex="-1"></a>top10_countries <span class="ot">&lt;-</span> country_means <span class="sc">|&gt;</span></span>
<span id="cb43-267"><a href="#cb43-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb43-268"><a href="#cb43-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-269"><a href="#cb43-269" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot bar chart of top 10 happiest countries</span></span>
<span id="cb43-270"><a href="#cb43-270" aria-hidden="true" tabindex="-1"></a>top10_countries <span class="sc">|&gt;</span></span>
<span id="cb43-271"><a href="#cb43-271" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(country_name, mean_happiness), </span>
<span id="cb43-272"><a href="#cb43-272" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> mean_happiness)) <span class="sc">+</span></span>
<span id="cb43-273"><a href="#cb43-273" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb43-274"><a href="#cb43-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb43-275"><a href="#cb43-275" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb43-276"><a href="#cb43-276" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Top 10 Happiest Countries (Average Life Ladder)"</span>,</span>
<span id="cb43-277"><a href="#cb43-277" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Country"</span>,</span>
<span id="cb43-278"><a href="#cb43-278" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Average Happiness Score"</span></span>
<span id="cb43-279"><a href="#cb43-279" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-280"><a href="#cb43-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-281"><a href="#cb43-281" aria-hidden="true" tabindex="-1"></a><span class="co">#aes(x = reorder(country_name, mean_happiness), y = mean_happiness)</span></span>
<span id="cb43-282"><a href="#cb43-282" aria-hidden="true" tabindex="-1"></a><span class="co">#reorder(x, y) tells R: “Sort x according to y.”</span></span>
<span id="cb43-283"><a href="#cb43-283" aria-hidden="true" tabindex="-1"></a><span class="co">#“Take country_name and reorder it based on the values of mean_happiness.”</span></span>
<span id="cb43-284"><a href="#cb43-284" aria-hidden="true" tabindex="-1"></a><span class="co">#Because in a bar plot: The height of the bar is determined by y</span></span>
<span id="cb43-285"><a href="#cb43-285" aria-hidden="true" tabindex="-1"></a><span class="co">#The position/order of the bars is determined by x</span></span>
<span id="cb43-286"><a href="#cb43-286" aria-hidden="true" tabindex="-1"></a><span class="co">#So sorting must be applied to x, not y.</span></span>
<span id="cb43-287"><a href="#cb43-287" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_col(): draw bars where height = y value.This is used when you already have a summary value (like mean), not raw counts.</span></span>
<span id="cb43-288"><a href="#cb43-288" aria-hidden="true" tabindex="-1"></a><span class="co">#coord_flip(): swaps x and y axes: countries go on the vertical axis</span></span>
<span id="cb43-289"><a href="#cb43-289" aria-hidden="true" tabindex="-1"></a><span class="co">#bars extend horizontally. This is much easier to read when we have long country names.</span></span>
<span id="cb43-290"><a href="#cb43-290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-291"><a href="#cb43-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-294"><a href="#cb43-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-295"><a href="#cb43-295" aria-hidden="true" tabindex="-1"></a><span class="co">#Q8.2: A barplot of bottom 10 countries</span></span>
<span id="cb43-296"><a href="#cb43-296" aria-hidden="true" tabindex="-1"></a>bottom_10_countries <span class="ot">&lt;-</span> country_means <span class="sc">|&gt;</span></span>
<span id="cb43-297"><a href="#cb43-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb43-298"><a href="#cb43-298" aria-hidden="true" tabindex="-1"></a><span class="co">#plot barchart of bottom 10 countries</span></span>
<span id="cb43-299"><a href="#cb43-299" aria-hidden="true" tabindex="-1"></a>bottom_10_countries <span class="sc">|&gt;</span></span>
<span id="cb43-300"><a href="#cb43-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(country_name, mean_happiness),</span>
<span id="cb43-301"><a href="#cb43-301" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> mean_happiness))<span class="sc">+</span></span>
<span id="cb43-302"><a href="#cb43-302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb43-303"><a href="#cb43-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb43-304"><a href="#cb43-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-305"><a href="#cb43-305" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Bottom 10 happiest countries (Average Life Ladder)"</span>,</span>
<span id="cb43-306"><a href="#cb43-306" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Country"</span>,</span>
<span id="cb43-307"><a href="#cb43-307" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Happiness Score"</span></span>
<span id="cb43-308"><a href="#cb43-308" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-309"><a href="#cb43-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-310"><a href="#cb43-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-311"><a href="#cb43-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-314"><a href="#cb43-314" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-315"><a href="#cb43-315" aria-hidden="true" tabindex="-1"></a><span class="co">#Q9: How does GDP relate to happiness?</span></span>
<span id="cb43-316"><a href="#cb43-316" aria-hidden="true" tabindex="-1"></a><span class="co">#(Happiness = Life Ladder, GDP = Log GDP per capita)</span></span>
<span id="cb43-317"><a href="#cb43-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-318"><a href="#cb43-318" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1: Prepare data (remove missing values)</span></span>
<span id="cb43-319"><a href="#cb43-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-320"><a href="#cb43-320" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-321"><a href="#cb43-321" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(life_ladder, log_gdp_per_capita) </span>
<span id="cb43-322"><a href="#cb43-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-323"><a href="#cb43-323" aria-hidden="true" tabindex="-1"></a><span class="co">#drop_na() ensures that only rows with complete values are kept</span></span>
<span id="cb43-324"><a href="#cb43-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-325"><a href="#cb43-325" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 2: Scatter plot of GDP vs Happiness</span></span>
<span id="cb43-326"><a href="#cb43-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-327"><a href="#cb43-327" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="sc">|&gt;</span></span>
<span id="cb43-328"><a href="#cb43-328" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_gdp_per_capita, <span class="at">y =</span> life_ladder)) <span class="sc">+</span></span>
<span id="cb43-329"><a href="#cb43-329" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> <span class="co">#alpha = 0.4 makes points semi-transparent so dense areas become visible</span></span>
<span id="cb43-330"><a href="#cb43-330" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb43-331"><a href="#cb43-331" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb43-332"><a href="#cb43-332" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Relationship Between GDP and Happiness"</span>,</span>
<span id="cb43-333"><a href="#cb43-333" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Log GDP per capita"</span>,</span>
<span id="cb43-334"><a href="#cb43-334" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Life Ladder (Happiness Score)"</span></span>
<span id="cb43-335"><a href="#cb43-335" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-336"><a href="#cb43-336" aria-hidden="true" tabindex="-1"></a><span class="co">#method = "lm" fits a straight line (linear model)</span></span>
<span id="cb43-337"><a href="#cb43-337" aria-hidden="true" tabindex="-1"></a><span class="co">#se = TRUE adds a shaded confidence interval → uncertainty around the line</span></span>
<span id="cb43-338"><a href="#cb43-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-339"><a href="#cb43-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-342"><a href="#cb43-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-343"><a href="#cb43-343" aria-hidden="true" tabindex="-1"></a><span class="co">#Q9.1: lets try to mention the linear regression equation on the plot</span></span>
<span id="cb43-344"><a href="#cb43-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-345"><a href="#cb43-345" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 1: Clean data</span></span>
<span id="cb43-346"><a href="#cb43-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-347"><a href="#cb43-347" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-348"><a href="#cb43-348" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(life_ladder, log_gdp_per_capita)</span>
<span id="cb43-349"><a href="#cb43-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-350"><a href="#cb43-350" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 2: Fit linear model (Happiness = Intercept + Slope × LogGDP)</span></span>
<span id="cb43-351"><a href="#cb43-351" aria-hidden="true" tabindex="-1"></a><span class="co">#even if one is missing, that row can't be used</span></span>
<span id="cb43-352"><a href="#cb43-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-353"><a href="#cb43-353" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(life_ladder <span class="sc">~</span>  log_gdp_per_capita, <span class="at">data =</span> gdp_data)</span>
<span id="cb43-354"><a href="#cb43-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-355"><a href="#cb43-355" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 3: Extract coefficients and R²</span></span>
<span id="cb43-356"><a href="#cb43-356" aria-hidden="true" tabindex="-1"></a>model_stats <span class="ot">&lt;-</span> <span class="fu">tidy</span>(model) <span class="co">#this returns a table of statistics of regression table (row1 = intercept (constant term); row2: slope (coefficient of log GDP))</span></span>
<span id="cb43-357"><a href="#cb43-357" aria-hidden="true" tabindex="-1"></a>model_glance <span class="ot">&lt;-</span> <span class="fu">glance</span>(model) <span class="co">#extract  R2</span></span>
<span id="cb43-358"><a href="#cb43-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-359"><a href="#cb43-359" aria-hidden="true" tabindex="-1"></a><span class="co">#store these statistics value</span></span>
<span id="cb43-360"><a href="#cb43-360" aria-hidden="true" tabindex="-1"></a>intercept <span class="ot">&lt;-</span> <span class="fu">round</span>(model_stats<span class="sc">$</span>estimate[<span class="dv">1</span>], <span class="dv">2</span>) <span class="co">#till 2 decimenl places</span></span>
<span id="cb43-361"><a href="#cb43-361" aria-hidden="true" tabindex="-1"></a>slope <span class="ot">&lt;-</span> <span class="fu">round</span>(model_stats<span class="sc">$</span>estimate[<span class="dv">2</span>], <span class="dv">2</span>)</span>
<span id="cb43-362"><a href="#cb43-362" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">round</span>(model_glance<span class="sc">$</span>r.squared, <span class="dv">2</span>)</span>
<span id="cb43-363"><a href="#cb43-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-364"><a href="#cb43-364" aria-hidden="true" tabindex="-1"></a><span class="co">#build equation text</span></span>
<span id="cb43-365"><a href="#cb43-365" aria-hidden="true" tabindex="-1"></a>eq_text <span class="ot">&lt;-</span> <span class="fu">paste0</span>( </span>
<span id="cb43-366"><a href="#cb43-366" aria-hidden="true" tabindex="-1"></a><span class="st">"Happiness = "</span>, intercept, <span class="st">" + "</span>, slope, <span class="st">" × logGDP</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb43-367"><a href="#cb43-367" aria-hidden="true" tabindex="-1"></a><span class="st">"R² = "</span>, r2</span>
<span id="cb43-368"><a href="#cb43-368" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-369"><a href="#cb43-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-370"><a href="#cb43-370" aria-hidden="true" tabindex="-1"></a><span class="co">#paste0(): It concatenates strings without spaces unless we add them manually.</span></span>
<span id="cb43-371"><a href="#cb43-371" aria-hidden="true" tabindex="-1"></a><span class="co">#Step 4: Plot with regression line + equation</span></span>
<span id="cb43-372"><a href="#cb43-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-373"><a href="#cb43-373" aria-hidden="true" tabindex="-1"></a>gdp_data <span class="sc">|&gt;</span></span>
<span id="cb43-374"><a href="#cb43-374" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(log_gdp_per_capita, life_ladder)) <span class="sc">+</span></span>
<span id="cb43-375"><a href="#cb43-375" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb43-376"><a href="#cb43-376" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb43-377"><a href="#cb43-377" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(</span>
<span id="cb43-378"><a href="#cb43-378" aria-hidden="true" tabindex="-1"></a><span class="st">"text"</span>, <span class="co">#We want to draw text, not shapes or lines.</span></span>
<span id="cb43-379"><a href="#cb43-379" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="fu">max</span>(gdp_data<span class="sc">$</span>log_gdp_per_capita) <span class="sc">*</span> <span class="fl">0.6</span>, <span class="co">#Place the equation 60% across the x-axis (right side but not too far).</span></span>
<span id="cb43-380"><a href="#cb43-380" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="fu">max</span>(gdp_data<span class="sc">$</span>life_ladder) <span class="sc">*</span> <span class="fl">0.95</span>, <span class="co">#Place it 95% up the y-axis (near the top)</span></span>
<span id="cb43-381"><a href="#cb43-381" aria-hidden="true" tabindex="-1"></a><span class="at">label =</span> eq_text, <span class="co">#This is the formatted equation + R²</span></span>
<span id="cb43-382"><a href="#cb43-382" aria-hidden="true" tabindex="-1"></a><span class="at">hjust =</span> <span class="dv">0</span>, <span class="co">#Left-align the text (so it doesn’t look squeezed).</span></span>
<span id="cb43-383"><a href="#cb43-383" aria-hidden="true" tabindex="-1"></a><span class="at">size =</span> <span class="dv">4</span></span>
<span id="cb43-384"><a href="#cb43-384" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb43-385"><a href="#cb43-385" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb43-386"><a href="#cb43-386" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"GDP vs Happiness with Regression Equation"</span>,</span>
<span id="cb43-387"><a href="#cb43-387" aria-hidden="true" tabindex="-1"></a><span class="at">x =</span> <span class="st">"Log GDP per capita"</span>,</span>
<span id="cb43-388"><a href="#cb43-388" aria-hidden="true" tabindex="-1"></a><span class="at">y =</span> <span class="st">"Life Ladder (Happiness Score)"</span></span>
<span id="cb43-389"><a href="#cb43-389" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-390"><a href="#cb43-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb43-391"><a href="#cb43-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-394"><a href="#cb43-394" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb43-395"><a href="#cb43-395" aria-hidden="true" tabindex="-1"></a><span class="co"># Q10: Plot a worl map and show how happiness score changes over time -interactive plot</span></span>
<span id="cb43-396"><a href="#cb43-396" aria-hidden="true" tabindex="-1"></a><span class="co">#Prepare data for mapping</span></span>
<span id="cb43-397"><a href="#cb43-397" aria-hidden="true" tabindex="-1"></a>happiness_map <span class="ot">&lt;-</span> happiness <span class="sc">|&gt;</span></span>
<span id="cb43-398"><a href="#cb43-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( </span>
<span id="cb43-399"><a href="#cb43-399" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso3 =</span> <span class="fu">countrycode</span>(country_name, <span class="st">"country.name"</span>, <span class="st">"iso3c"</span>)</span>
<span id="cb43-400"><a href="#cb43-400" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-401"><a href="#cb43-401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(iso3, life_ladder) <span class="co">#remove rows where iso3 code and life_ladder missing</span></span>
<span id="cb43-402"><a href="#cb43-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-403"><a href="#cb43-403" aria-hidden="true" tabindex="-1"></a><span class="co"># Build interactive world map with year slider</span></span>
<span id="cb43-404"><a href="#cb43-404" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> happiness_map <span class="sc">|&gt;</span></span>
<span id="cb43-405"><a href="#cb43-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_ly</span>(  <span class="co">#plotly interactive plot</span></span>
<span id="cb43-406"><a href="#cb43-406" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="sc">~</span>iso3, <span class="co">#Draw a country based on its ISO3 code</span></span>
<span id="cb43-407"><a href="#cb43-407" aria-hidden="true" tabindex="-1"></a>    <span class="at">z =</span> <span class="sc">~</span>life_ladder, <span class="co">#This determines the color shading of each country.</span></span>
<span id="cb43-408"><a href="#cb43-408" aria-hidden="true" tabindex="-1"></a>    <span class="at">frame =</span> <span class="sc">~</span>year, <span class="co">#created the year slider, one map per year</span></span>
<span id="cb43-409"><a href="#cb43-409" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"choropleth"</span>, <span class="co">#A choropleth map meanswhere each country is shaded based on the value of a variable</span></span>
<span id="cb43-410"><a href="#cb43-410" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="sc">~</span>life_ladder, <span class="co">#Use Life Ladder values to determine the map color.</span></span>
<span id="cb43-411"><a href="#cb43-411" aria-hidden="true" tabindex="-1"></a>    <span class="at">colorscale =</span> <span class="st">"Viridis"</span> <span class="co">#color-blind friendly</span></span>
<span id="cb43-412"><a href="#cb43-412" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-413"><a href="#cb43-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colorbar</span>(<span class="at">title =</span> <span class="st">"Life Ladder"</span>) <span class="sc">|&gt;</span> <span class="co">#Adds a legend on the right showing the mapping between color and happiness score.</span></span>
<span id="cb43-414"><a href="#cb43-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>( <span class="co">#Controls the visual layout</span></span>
<span id="cb43-415"><a href="#cb43-415" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"World Happiness Over Time"</span>,</span>
<span id="cb43-416"><a href="#cb43-416" aria-hidden="true" tabindex="-1"></a>    <span class="at">geo =</span> <span class="fu">list</span>(<span class="at">showframe =</span> <span class="cn">FALSE</span>, <span class="at">showcoastlines =</span> <span class="cn">FALSE</span>)) <span class="co">#no border frames and coastlines</span></span>
<span id="cb43-417"><a href="#cb43-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-418"><a href="#cb43-418" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb43-419"><a href="#cb43-419" aria-hidden="true" tabindex="-1"></a><span class="do">##We take the original happiness dataset and add a new column called iso3</span></span>
<span id="cb43-420"><a href="#cb43-420" aria-hidden="true" tabindex="-1"></a><span class="co">#Plotly requires ISO3 codes in the locations argument.</span></span>
<span id="cb43-421"><a href="#cb43-421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>